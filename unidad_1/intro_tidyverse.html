<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Christian Ballejo">
<meta name="author" content="Tamara Ricardo">
<title>Introducción a tidyverse – Curso Epidemiología - Nivel Avanzado</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../unidad_1/analisis_exploratorio.html" rel="next">
<link href="../unidad_1/intro_RStudio.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script><script src="../site_libs/kePrint-0.0.1/kePrint.js"></script><link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<style type="text/css">
.quarto-reader-toggle .bi::before, .quarto-color-scheme-toggle .bi::before {
  display: inline-block;
  height: 40px;
  width: 40px;
  background-size: 20px 20px;
  background-position: center;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgba(189, 195, 199, 1)" class="bi bi-moon-stars-fill" viewbox="0 0 16 16"> <path d="M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278"></path> <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.73 1.73 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.73 1.73 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.73 1.73 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z"></path> </svg>') !important;
}
</style>
<link rel="stylesheet" href="../styles.css">
</head>
<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><div id="quarto-announcement" data-announcement-id="4ab7ce5ee7c696df0f91065161a52a26" class="alert alert-dark hidden">
<i class="bi bi-file-pdf-fill quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p>Guardar como PDF: presione <strong>CTRL</strong> + <strong>P</strong></p>
</div>
<i class="bi bi-x-lg quarto-announcement-action"></i>
</div>
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-curso-de-epidemiología-nivel-avanzado" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Curso de Epidemiología: Nivel Avanzado</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-curso-de-epidemiología-nivel-avanzado">
<li>
    <a class="dropdown-item" href="../unidad_1/intro_R.html">
 <span class="dropdown-text">Unidad 1: Introducción a R</span></a>
  </li>  
        <li class="dropdown-header">Unidad 2: Estudios transversales</li>
        <li class="dropdown-header">Unidad 3: Estudios ecológicos</li>
        <li class="dropdown-header">Unidad 4: Estudios de casos y controles</li>
        <li class="dropdown-header">Unidad 5: Estudios de cohortes</li>
        <li class="dropdown-header">Unidad 6: Estudios experimentales</li>
    </ul>
</li>
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-descargas" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-cloud-download" role="img">
</i> 
 <span class="menu-text">Descargas</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-descargas">
<li>
    <a class="dropdown-item" href="https://cran.rstudio.com/bin/windows/" target="_blank"><i class="bi bi-windows" role="img">
</i> 
 <span class="dropdown-text">R para Windows</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://cran.rstudio.com/bin/macosx/" target="_blank"><i class="bi bi-apple" role="img">
</i> 
 <span class="dropdown-text">R para macOS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://cran.rstudio.com/bin/linux/" target="_blank"><i class="bi bi-ubuntu" role="img">
</i> 
 <span class="dropdown-text">R para Linux</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://posit.co/download/rstudio-desktop/" target="_blank"><i class="bi bi-terminal" role="img">
</i> 
 <span class="dropdown-text">RStudio Desktop</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://cran.r-project.org/bin/windows/Rtools/" target="_blank"><i class="bi bi-terminal" role="img">
</i> 
 <span class="dropdown-text">RTools</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../files/datos_y_paquetes.zip"><i class="bi bi-file-zip" role="img">
</i> 
 <span class="dropdown-text">Paquetes y datos para el curso</span></a>
  </li>  
    </ul>
</li>
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Alternar modo oscuro"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../unidad_1/intro_R.html">Unidad 1</a></li><li class="breadcrumb-item"><a href="../unidad_1/intro_tidyverse.html">Introducción a tidyverse</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true"><i class="bi bi-file-earmark-bar-graph" role="img">
</i> 
 <span class="menu-text">Unidad 1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unidad_1/intro_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introducción a R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unidad_1/intro_RStudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Primeros pasos y generalidades</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unidad_1/intro_tidyverse.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Introducción a tidyverse</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unidad_1/analisis_exploratorio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Análisis exploratorio de datos</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unidad_1/hoja_estilo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hoja de Estilo del lenguaje R</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contenidos</h2>
   
  <ul>
<li><a href="#introducci%C3%B3n" id="toc-introducción" class="nav-link active" data-scroll-target="#introducci%C3%B3n">Introducción</a></li>
  <li><a href="#dataframes-con-tibble" id="toc-dataframes-con-tibble" class="nav-link" data-scroll-target="#dataframes-con-tibble">Dataframes con <code>tibble</code></a></li>
  <li><a href="#tuber%C3%ADas-con-magrittr" id="toc-tuberías-con-magrittr" class="nav-link" data-scroll-target="#tuber%C3%ADas-con-magrittr">Tuberías con <code>magrittr</code></a></li>
  <li>
<a href="#lectura-y-escritura-de-datos" id="toc-lectura-y-escritura-de-datos" class="nav-link" data-scroll-target="#lectura-y-escritura-de-datos">Lectura y escritura de datos</a>
  <ul class="collapse">
<li><a href="#archivos-de-texto-plano-con-readr" id="toc-archivos-de-texto-plano-con-readr" class="nav-link" data-scroll-target="#archivos-de-texto-plano-con-readr">Archivos de texto plano con <code>readr</code></a></li>
  <li><a href="#lectura-de-hojas-de-c%C3%A1lculo-con-readxl" id="toc-lectura-de-hojas-de-cálculo-con-readxl" class="nav-link" data-scroll-target="#lectura-de-hojas-de-c%C3%A1lculo-con-readxl">Lectura de hojas de cálculo con <code>readxl</code></a></li>
  </ul>
</li>
  <li>
<a href="#gesti%C3%B3n-de-datos-con-dplyr" id="toc-gestión-de-datos-con-dplyr" class="nav-link" data-scroll-target="#gesti%C3%B3n-de-datos-con-dplyr">Gestión de datos con <code>dplyr</code></a>
  <ul class="collapse">
<li><a href="#argumentos-comunes-en-las-funciones-dplyr" id="toc-argumentos-comunes-en-las-funciones-dplyr" class="nav-link" data-scroll-target="#argumentos-comunes-en-las-funciones-dplyr">Argumentos comunes en las funciones <strong><code>dplyr</code></strong></a></li>
  <li><a href="#activaci%C3%B3n-del-paquete" id="toc-activación-del-paquete" class="nav-link" data-scroll-target="#activaci%C3%B3n-del-paquete">Activación del paquete</a></li>
  <li><a href="#conjunto-de-datos-para-ejemplo" id="toc-conjunto-de-datos-para-ejemplo" class="nav-link" data-scroll-target="#conjunto-de-datos-para-ejemplo">Conjunto de datos para ejemplo</a></li>
  <li><a href="#funci%C3%B3n-select" id="toc-función-select" class="nav-link" data-scroll-target="#funci%C3%B3n-select">Función <code>select()</code></a></li>
  <li><a href="#funci%C3%B3n-rename" id="toc-función-rename" class="nav-link" data-scroll-target="#funci%C3%B3n-rename">Función <code>rename()</code></a></li>
  <li><a href="#funci%C3%B3n-filter" id="toc-función-filter" class="nav-link" data-scroll-target="#funci%C3%B3n-filter">Función <code>filter()</code></a></li>
  <li><a href="#funci%C3%B3n-arrange" id="toc-función-arrange" class="nav-link" data-scroll-target="#funci%C3%B3n-arrange">Función <code>arrange()</code></a></li>
  <li><a href="#funci%C3%B3n-mutate" id="toc-función-mutate" class="nav-link" data-scroll-target="#funci%C3%B3n-mutate">Función <code>mutate()</code></a></li>
  <li><a href="#funci%C3%B3n-summarise" id="toc-función-summarise" class="nav-link" data-scroll-target="#funci%C3%B3n-summarise">Función <code>summarise()</code></a></li>
  <li><a href="#funci%C3%B3n-group_by" id="toc-función-group_by" class="nav-link" data-scroll-target="#funci%C3%B3n-group_by">Función <code>group_by()</code></a></li>
  <li><a href="#combinaciones" id="toc-combinaciones" class="nav-link" data-scroll-target="#combinaciones">Combinaciones</a></li>
  <li><a href="#funci%C3%B3n-count" id="toc-función-count" class="nav-link" data-scroll-target="#funci%C3%B3n-count">Función <code>count()</code></a></li>
  </ul>
</li>
  <li>
<a href="#gr%C3%A1ficos-estad%C3%ADsticos-con-ggplot2" id="toc-gráficos-estadísticos-con-ggplot2" class="nav-link" data-scroll-target="#gr%C3%A1ficos-estad%C3%ADsticos-con-ggplot2">Gráficos estadísticos con <code>ggplot2</code></a>
  <ul class="collapse">
<li><a href="#anatom%C3%ADa-de-gr%C3%A1ficos-con-ggplot2" id="toc-anatomía-de-gráficos-con-ggplot2" class="nav-link" data-scroll-target="#anatom%C3%ADa-de-gr%C3%A1ficos-con-ggplot2">Anatomía de gráficos con <code>ggplot2</code></a></li>
  <li><a href="#mapeo-est%C3%A9tico-con-aes-y-capas-geom%C3%A9tricas-geom_" id="toc-mapeo-estético-con-aes-y-capas-geométricas-geom_" class="nav-link" data-scroll-target="#mapeo-est%C3%A9tico-con-aes-y-capas-geom%C3%A9tricas-geom_">Mapeo estético con <code>aes()</code> y capas geométricas (<code>geom_</code>)</a></li>
  <li><a href="#personalizaci%C3%B3n-de-escalas-con-scale_" id="toc-personalización-de-escalas-con-scale_" class="nav-link" data-scroll-target="#personalizaci%C3%B3n-de-escalas-con-scale_">Personalización de escalas con <code>scale_</code></a></li>
  <li><a href="#transformaciones-estad%C3%ADsticas-con-stat_" id="toc-transformaciones-estadísticas-con-stat_" class="nav-link" data-scroll-target="#transformaciones-estad%C3%ADsticas-con-stat_">Transformaciones estadísticas con <strong><code>stat_</code></strong></a></li>
  <li><a href="#facetado-con-facet_" id="toc-facetado-con-facet_" class="nav-link" data-scroll-target="#facetado-con-facet_">Facetado con <strong><code>facet_</code></strong></a></li>
  <li><a href="#sistema-de-coordenadas-con-coord_" id="toc-sistema-de-coordenadas-con-coord_" class="nav-link" data-scroll-target="#sistema-de-coordenadas-con-coord_">Sistema de coordenadas con <code>coord_</code></a></li>
  <li><a href="#temas-con-theme" id="toc-temas-con-theme" class="nav-link" data-scroll-target="#temas-con-theme">Temas con <code>theme()</code></a></li>
  <li><a href="#paquete-esquisse" id="toc-paquete-esquisse" class="nav-link" data-scroll-target="#paquete-esquisse">Paquete <code>esquisse</code></a></li>
  <li><a href="#otras-extensiones-de-ggplot2" id="toc-otras-extensiones-de-ggplot2" class="nav-link" data-scroll-target="#otras-extensiones-de-ggplot2">Otras extensiones de ggplot2</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../unidad_1/intro_R.html">Unidad 1</a></li><li class="breadcrumb-item"><a href="../unidad_1/intro_tidyverse.html">Introducción a tidyverse</a></li></ol></nav><div class="quarto-title">
<h1 class="title">Introducción a tidyverse</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autores/as</div>
    <div class="quarto-title-meta-contents">
             <p>Christian Ballejo <a href="https://orcid.org/0000-0002-7346-5701" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
             <p>Tamara Ricardo <a href="https://orcid.org/0000-0002-0921-2611" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
          </div>
  </div>
    
  
    
  </div>
  


</header><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/tidyverse.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:44.0%"></p>
</figure>
</div>
<section id="introducción" class="level2"><h2 class="anchored" data-anchor-id="introducción">Introducción</h2>
<p><em>Tidyverse</em> <span class="citation" data-cites="tidyverse">(<a href="#ref-tidyverse" role="doc-biblioref">Wickham et&nbsp;al. 2019</a>)</span> es el nombre que recibe el conjunto de paquetes desarrollados y/o promovidos por <a href="https://en.wikipedia.org/wiki/Hadley_Wickham">Hadley Wickham</a> (jefe científico en Posit/RStudio) y su equipo, orientado al trabajo de ciencia de datos con R. Estos paquetes están diseñados para integrarse de manera coherente, compartiendo una misma filosofía de diseño conocida como <a href="https://cran.r-project.org/web/packages/tidyverse/vignettes/manifesto.html"><em>The tidy tools manifesto</em></a>.</p>
<p>Los cuatro principios básicos sobre los que se construye <em>tidyverse</em> son:</p>
<ul>
<li><p>Reutilización de estructuras de datos</p></li>
<li><p>Resolución de problemas complejos combinando varias piezas sencillas</p></li>
<li><p>Uso de programación funcional</p></li>
<li><p>Diseño orientado a las personas</p></li>
</ul>
<p>Los paquetes incluidos cubren todas las etapas del análisis de datos dentro de R: importación y ordenamiento de los datos (<em>tidy data</em>), transformación, visualización, modelado y la posterior comunicación de resultados.</p>
<p>La palabra <em>tidy</em> se traduce como “ordenado”, y hace referencia a una estructura específica que deben cumplir los datos:</p>
<ul>
<li>Cada <strong><em>variable</em></strong> es una <em>columna</em> de la tabla de datos.</li>
<li>Cada <strong><em>observación</em></strong> es una <em>fila</em> de la tabla de datos.</li>
<li>Cada <strong><em>tabla</em></strong> responde a una <em>unidad de observación o</em> análisis.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/tidy.PNG" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>Además de los paquetes principales, al instalar <code>tidyverse</code> se incluyen otros que permiten trabajar con fechas, cadenas de caracteres o factores, también siguiendo los mismos principios.</p>
<p>Uno de los objetivos de los desarrolladores fue dotar a la sintaxis de estos paquetes de una <strong>gramática</strong> clara: funciones cuyos nombres y argumentos permiten construir “<em>frases</em>” que sean semánticamente comprensibles. Un ejemplo de esto se ve en el paquete <code>dplyr</code>, donde la mayoría de las funciones son verbos en inglés como <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>, lo que facilita su lectura y comprensión.</p>
<p>El paquete <code>tidyverse</code> (versión 2.0.0) puede instalarse desde el repositorio oficial CRAN mediante el menú <em>Packages</em> de RStudio, o ejecutando el siguiente código:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Una vez instalado, se activa mediante:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Al activarlo, se muestra un mensaje con la versión instalada, la lista de paquetes que se cargan automáticamente y posibles conflictos de nombres entre funciones. Esto es habitual cuando se utilizan múltiples paquetes, ya que algunas funciones pueden llamarse igual. Por ejemplo, la función <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> existe tanto en el paquete <code>stats</code> como en <code>dplyr</code>. Al cargar <code>tidyverse</code>, R avisa de esta superposición:</p>
<p><code>✖️dplyr::filter() masks stats::filter()</code></p>
<p>Cuando necesitamos asegurarnos de que estamos usando la función de un paquete específico, se recomienda usar la notación <code>::</code>, por ejemplo:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Función filter() del paquete stats</span></span>
<span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Función filter() del paquete tidyverse</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Una estrategia útil cuando trabajamos con varios paquetes es cargar <code>tidyverse</code> al final de la lista de paquetes, para que sus funciones sobrescriban las de otros paquetes si fuese necesario:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">stats</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Los paquetes que se instalan con la versión actual de <code>tidyverse</code> pueden consultarse ejecutando:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://tidyverse.tidyverse.org/reference/tidyverse_packages.html">tidyverse_packages</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "broom"         "conflicted"    "cli"           "dbplyr"       
 [5] "dplyr"         "dtplyr"        "forcats"       "ggplot2"      
 [9] "googledrive"   "googlesheets4" "haven"         "hms"          
[13] "httr"          "jsonlite"      "lubridate"     "magrittr"     
[17] "modelr"        "pillar"        "purrr"         "ragg"         
[21] "readr"         "readxl"        "reprex"        "rlang"        
[25] "rstudioapi"    "rvest"         "stringr"       "tibble"       
[29] "tidyr"         "xml2"          "tidyverse"    </code></pre>
</div>
</div>
<p>Además, existen muchos otros paquetes que siguen la misma filosofía pero no están incluidos por defecto. En esos casos, deben instalarse y activarse individualmente.</p>
<div class="callout callout-style-simple callout-warning">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>Para profundizar el uso de <code>tidyverse</code>, se recomienda consultar las siguientes fuentes:</p>
<ul>
<li><p>Sitio oficial: <a href="https://www.tidyverse.org/" class="uri">https://www.tidyverse.org/</a></p></li>
<li><p>Libro <em>R para Ciencia de Datos:</em> <a href="https://es.r4ds.hadley.nz/index.html">r4ds</a> o la nueva versión <a href="https://r4ds.hadley.nz/"><em>r4ds 2e</em></a> (por ahora solo disponible en inglés).</p></li>
<li><p><a href="https://www.epirhandbook.com/es/index.es.html">EpiRhandbook en español</a></p></li>
</ul>
</div>
</div>
</div>
</section><section id="dataframes-con-tibble" class="level2"><h2 class="anchored" data-anchor-id="dataframes-con-tibble">Dataframes con <code>tibble</code>
</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://tibble.tidyverse.org/"><img src="images/tibble.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:20.0%"></a></p>
</figure>
</div>
<p>Uno de los paquetes que forman parte del núcleo básico de <em>tidyverse</em> es <code>tibble</code> <span class="citation" data-cites="tibble">(<a href="#ref-tibble" role="doc-biblioref">Müller y Wickham 2023</a>)</span>, que introduce una versión moderna del objeto <code>data.frame</code>. Todas las funciones que generan tablas de datos en <em>tidyverse</em> devuelven objetos <em>tibble</em> (<code>tbl_df</code>), los cuales son más eficientes y amigables para el flujo de trabajo.</p>
<p>Las principales ventajas de trabajar con <code>tibble</code> son:</p>
<ul>
<li><p>Impresión en consola más legible y controlada (muestran un número limitado de filas y columnas).</p></li>
<li><p>No cambian automáticamente el tipo de datos.</p></li>
<li><p>Permiten nombres de columnas con espacios o caracteres especiales si se encierran entre comillas invertidas <code>`</code> (aunque <strong>no se recomienda</strong>).</p></li>
</ul>
<p>Para crear un objeto <em>tibble</em> manualmente usamos el siguiente código:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>  nombre <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ana"</span>, <span class="st">"Luis"</span>, <span class="st">"María"</span><span class="op">)</span>,</span>
<span>  edad <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">34</span>, <span class="fl">28</span>, <span class="fl">45</span><span class="op">)</span>,</span>
<span>  altura <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.65</span>, <span class="fl">1.80</span>, <span class="fl">1.70</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="tuberías-con-magrittr" class="level2"><h2 class="anchored" data-anchor-id="tuberías-con-magrittr">Tuberías con <code>magrittr</code>
</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://magrittr.tidyverse.org/"><img src="images/magrittr.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:20.0%"></a></p>
</figure>
</div>
<p>Una de las incorporaciones más útiles y transversales del ecosistema <em>tidyverse</em> es el uso de “<em>tuberías”</em> o <em>pipe operators</em>. Una tubería conecta un bloque de código con otro, permitiendo encadenar operaciones de manera legible. El operador <code>%&gt;%</code>, proveniente del paquete <code>magrittr</code> <span class="citation" data-cites="magrittr">(<a href="#ref-magrittr" role="doc-biblioref">Bache y Wickham 2022</a>)</span>, transforma llamadas de funciones anidadas (con múltiples paréntesis) en una secuencia de pasos más simple de leer y escribir.</p>
<p>A partir de la versión 4.1.0 de R, también se incorporó una <strong>tubería nativa</strong> (<code>|&gt;</code>), con un comportamiento muy similar. Ambas opciones son válidas y su uso es prácticamente equivalente.</p>
<p>Este enfoque refleja el principio de que <em>cada función representa un paso en una secuencia lógica de transformación de datos</em>. La forma de trabajar se puede ver en el siguiente esquema general:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/pipe.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>A continuación, mostramos un ejemplo comparativo de cómo cambia la sintaxis usando el dataset incorporado en R <code>mtcars</code>, que contiene datos sobre autos:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span> </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       mpg      cyl     disp        hp     drat       wt
Mazda RX4         4.582576 2.449490 12.64911 10.488088 1.974842 1.618641
Mazda RX4 Wag     4.582576 2.449490 12.64911 10.488088 1.974842 1.695582
Datsun 710        4.774935 2.000000 10.39230  9.643651 1.962142 1.523155
Hornet 4 Drive    4.626013 2.449490 16.06238 10.488088 1.754993 1.793042
Hornet Sportabout 4.324350 2.828427 18.97367 13.228757 1.774824 1.854724
Valiant           4.254409 2.449490 15.00000 10.246951 1.661325 1.860108
                      qsec vs am     gear     carb
Mazda RX4         4.057093  0  1 2.000000 2.000000
Mazda RX4 Wag     4.125530  0  1 2.000000 2.000000
Datsun 710        4.313931  1  1 2.000000 1.000000
Hornet 4 Drive    4.409082  1  0 1.732051 1.000000
Hornet Sportabout 4.125530  0  0 1.732051 1.414214
Valiant           4.496665  1  0 1.732051 1.000000</code></pre>
</div>
</div>
<p>En la línea de código anterior estamos pidiendo mostrar la cabecera (6 primeras observaciones de la tabla de datos) de la raíz cuadrada de los valores de la tabla <code>mtcars</code>, en formato del lenguaje clásico (anidado).</p>
<p>Ahora activamos <code>magrittr</code> y ejecutamos la línea anterior en formato tubería:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Activa paquete</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Formato tubería</span></span>
<span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       mpg      cyl     disp        hp     drat       wt
Mazda RX4         4.582576 2.449490 12.64911 10.488088 1.974842 1.618641
Mazda RX4 Wag     4.582576 2.449490 12.64911 10.488088 1.974842 1.695582
Datsun 710        4.774935 2.000000 10.39230  9.643651 1.962142 1.523155
Hornet 4 Drive    4.626013 2.449490 16.06238 10.488088 1.754993 1.793042
Hornet Sportabout 4.324350 2.828427 18.97367 13.228757 1.774824 1.854724
Valiant           4.254409 2.449490 15.00000 10.246951 1.661325 1.860108
                      qsec vs am     gear     carb
Mazda RX4         4.057093  0  1 2.000000 2.000000
Mazda RX4 Wag     4.125530  0  1 2.000000 2.000000
Datsun 710        4.313931  1  1 2.000000 1.000000
Hornet 4 Drive    4.409082  1  0 1.732051 1.000000
Hornet Sportabout 4.125530  0  0 1.732051 1.414214
Valiant           4.496665  1  0 1.732051 1.000000</code></pre>
</div>
</div>
<p>Podemos hacer lo mismo con la tubería nativa de R sin activar ningún paquete (revisar que esté activada desde <code>Tools &gt; Global Options</code>):</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Tubería nativa</span></span>
<span><span class="va">mtcars</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       mpg      cyl     disp        hp     drat       wt
Mazda RX4         4.582576 2.449490 12.64911 10.488088 1.974842 1.618641
Mazda RX4 Wag     4.582576 2.449490 12.64911 10.488088 1.974842 1.695582
Datsun 710        4.774935 2.000000 10.39230  9.643651 1.962142 1.523155
Hornet 4 Drive    4.626013 2.449490 16.06238 10.488088 1.754993 1.793042
Hornet Sportabout 4.324350 2.828427 18.97367 13.228757 1.774824 1.854724
Valiant           4.254409 2.449490 15.00000 10.246951 1.661325 1.860108
                      qsec vs am     gear     carb
Mazda RX4         4.057093  0  1 2.000000 2.000000
Mazda RX4 Wag     4.125530  0  1 2.000000 2.000000
Datsun 710        4.313931  1  1 2.000000 1.000000
Hornet 4 Drive    4.409082  1  0 1.732051 1.000000
Hornet Sportabout 4.125530  0  0 1.732051 1.414214
Valiant           4.496665  1  0 1.732051 1.000000</code></pre>
</div>
</div>
<p>Las tuberías le dan mucha mas claridad al código separandolo en partes, como si fuesen oraciones de un párrafo.</p>
</section><section id="lectura-y-escritura-de-datos" class="level2"><h2 class="anchored" data-anchor-id="lectura-y-escritura-de-datos">Lectura y escritura de datos</h2>
<section id="archivos-de-texto-plano-con-readr" class="level3"><h3 class="anchored" data-anchor-id="archivos-de-texto-plano-con-readr">Archivos de texto plano con <code>readr</code>
</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://readr.tidyverse.org/"><img src="images/readr.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:20.0%"></a></p>
</figure>
</div>
<p>El paquete <code>readr</code> <span class="citation" data-cites="readr">(<a href="#ref-readr" role="doc-biblioref">Wickham, Hester, y Bryan 2024</a>)</span> contiene funciones similares a las de la familia <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> de R base, pero desarrollados bajo el ecosistema <code>tidyverse</code>.</p>
<p>Los archivos de texto plano (ASCII u otras codificaciones) son universalmente utilizados por la mayoría de los gestores de bases de datos y planillas de cálculo. Generalmente se encuentran con extensiones <code>.txt</code> o <code>.csv</code> (por <em>comma-separated values</em>) y son el tipo de archivo de datos más habitual en R.</p>
<p>Estos datos planos tienen dos características principales:</p>
<ul>
<li>La cabecera (en inglés <em>header</em>).</li>
<li>El carácter o símbolo separador que indica la separación de columnas: pueden estar separadas por comas, punto y coma, tabulación, etc.</li>
</ul>
<p>La presencia o no de una cabecera se maneja con los argumentos <code>col_names</code> y <code>skip</code>:</p>
<ul>
<li><p><code>col_names = TRUE</code> indica que la primera fila contiene los nombres de las columnas (cabecera).</p></li>
<li><p><code>col_names = FALSE</code> indica que no hay cabecera y las columnas se nombran automáticamente (<code>X1</code>, <code>X2</code>, etc).</p></li>
<li><p><code>skip = 0</code> (valor por defecto) lee los datos desde la primera fila, pero si hay encabezados complejos (por ejemplo, títulos y subtítulos ), se puede indicar cuántas filas deben omitirse. Ejemplo: <code>skip = 5</code> omite las primeras 5 filas del archivo.</p></li>
</ul>
<p>Otro aspecto a considerar es el carácter <strong>separador</strong> utilizado para indicar la separación entre columnas. Los separadores más comunes son:</p>
<ul>
<li><p>coma (<code>,</code>)</p></li>
<li><p>punto y coma (<code>;</code>)</p></li>
<li><p>tabulación (<code>TAB</code>)</p></li>
<li><p>espacio (<code>" "</code>)</p></li>
<li><p>barra vertical o <em>pipe</em> (<code>|</code>)</p></li>
</ul>
<section id="funciones-de-lectura" class="level4"><h4 class="anchored" data-anchor-id="funciones-de-lectura">Funciones de lectura</h4>
<p>Algunas de las funciones del paquete asumen un separador particular. Por caso <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> lee separados por coma y <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_tsv()</a></code> separado por tabulaciones, pero la función <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code> permite que definamos el separador a través del argumento <code>delim</code>.</p>
<p>En forma detallada el paquete <code>readr</code> soporta siete formatos de archivo a partir de siete funciones:</p>
<ul>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code>: archivos separados por comas (CSV).</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_tsv()</a></code>: archivos separados por tabulaciones.</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code>: archivos separados con delimitadores generales.</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_fwf.html">read_fwf()</a></code>: archivos con columnas de ancho fijo.</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_table.html">read_table()</a></code>: archivos formato tabla con columnas separadas por espacios.</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_log.html">read_log()</a></code>: archivos log web.</li>
</ul>
<p>En comparación con las funciones R <code>base</code>, las funciones de <code>readr</code>:</p>
<ul>
<li><p>Usan un esquema de nombres consistente de parámetros.</p></li>
<li><p>Son más rápidas.</p></li>
<li><p>Analizan eficientemente los formatos de datos comunes (especialmente fechas y horas).</p></li>
<li><p>Muestra una barra de progreso para archivos grandes.</p></li>
<li><p>Vienen incluidas dentro de <code>tidyverse</code> pero también pueden usarse de forma independiente:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A modo de ejemplo, leeremos un archivo sin cabecera separado por comas bajo el nombre <code>datos</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"datos/ejemplo-datos.csv"</span>, </span>
<span>                  col_names <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="va">datos</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
     X1 X2       X3       X4    X5        
  &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;date&gt;    
1     9 Leone    Fernando M     1958-12-24
2    26 Garcia   Esteban  M     1954-01-21
3    35 Salamone Nicolas  M     1993-06-27
4    48 Gonzalez Viviana  F     1965-06-21</code></pre>
</div>
</div>
<p>Leemos el mismo archivo con cabecera y separado por punto y comas, bajo el nombre <code>info</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv2</a></span><span class="op">(</span><span class="st">"datos/ejemplo-datos-header.csv"</span>,</span>
<span>                  col_names <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">info</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
   Iden Apellido Nombre   Sexo  FNac      
  &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;date&gt;    
1     9 Leone    Fernando M     1958-12-24
2    26 Garcia   Laura    M     1954-01-21
3    35 Salamone Nicolas  M     1993-06-27
4    48 Gonzalez Viviana  F     1965-06-21</code></pre>
</div>
</div>
<p>En estos ejemplos:</p>
<ul>
<li><p><code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> espera comas como separador</p></li>
<li><p><code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv2()</a></code> espera punto y coma como separador</p></li>
</ul>
<p>Al leer un archivo, <code>readr</code> intenta adivinar automáticamente el tipo de dato de cada columna (<em>parse</em>). Si no hay cabecera, los nombres de columna serán <code>X1</code>, <code>X2</code>, etc.</p>
<p>Podemos inspeccionar la estructura de un dataframe con <code><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse()</a></code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">info</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 4
Columns: 5
$ Iden     &lt;dbl&gt; 9, 26, 35, 48
$ Apellido &lt;chr&gt; "Leone", "Garcia", "Salamone", "Gonzalez"
$ Nombre   &lt;chr&gt; "Fernando", "Laura", "Nicolas", "Viviana"
$ Sexo     &lt;chr&gt; "M", "M", "M", "F"
$ FNac     &lt;date&gt; 1958-12-24, 1954-01-21, 1993-06-27, 1965-06-21</code></pre>
</div>
</div>
<p>Los tipos de datos posibles son:</p>
<ul>
<li><p><code>character</code> (<code>&lt;chr&gt;</code>)</p></li>
<li><p><code>integer</code>, <code>double</code> o <code>numeric</code> (<code>&lt;int&gt;</code>, <code>&lt;dbl&gt;</code>)</p></li>
<li><p><code>logical</code> (<code>&lt;lgl&gt;</code>)</p></li>
<li><p><code>date</code>, <code>datetime</code>, etc.</p></li>
</ul>
<p>Por ejemplo, columnas con enteros pueden aparecer como <code>&lt;dbl&gt;</code> si se interpretan como <code>double</code>, y las fechas como <code>&lt;date&gt;</code>.</p>
<p>Agregamos unos argumentos más y ejemplificamos la sintaxis con <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code> para leer un archivo con cabecera compleja (la tabla comienza en la fila 9) separado por caracteres <code>|</code> (<em>pipes</em>).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim</a></span><span class="op">(</span><span class="st">"ejemplo-datos-header-skip.txt"</span>, </span>
<span>           col_names <span class="op">=</span> <span class="cn">T</span>, </span>
<span>           skip <span class="op">=</span> <span class="fl">8</span>, </span>
<span>           delim <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>Importante:</strong> No olvides asignar la lectura a un nombre para guardar el dataframe dentro del entorno de trabajo (por ejemplo: <code>datos &lt;-</code>).</p>
</blockquote>
</section><section id="funciones-de-escritura" class="level4"><h4 class="anchored" data-anchor-id="funciones-de-escritura">Funciones de escritura</h4>
<p>El paquete también incluye funciones para escribir archivos de texto plano, con formatos espejo de las funciones de lectura más comunes:</p>
<ul>
<li>
<code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv()</a></code>: escribe archivos separados por comas</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv2()</a></code>: escribe archivos separados por punto y comas</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_tsv()</a></code>: escribe archivos separados por tabulaciones</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_delim()</a></code>: escribe archivos separados con delimitadores definidos por el usuario</li>
</ul>
<p>Los argumentos son generales y para el caso del último más extensos, dado que hay que definir cual es el separador que deseamos en el archivo. Podemos consultarlos con el siguiente código:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">write_delim</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (x, file, delim = " ", na = "NA", append = FALSE, col_names = !append, 
    quote = c("needed", "all", "none"), escape = c("double", 
        "backslash", "none"), eol = "\n", num_threads = readr_threads(), 
    progress = show_progress(), path = deprecated(), quote_escape = deprecated()) 
NULL</code></pre>
</div>
</div>
<p>Por ejemplo para exportar un conjunto de datos en texto plano al que denominaremos “<code>ejemplo.csv</code><strong>“</strong> con separador <strong>punto y coma</strong> y <strong>cabecera incluida</strong> podemos hacer:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_delim</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datos</span>, file <span class="op">=</span> <span class="st">"ejemplo.csv"</span>, delim <span class="op">=</span> <span class="st">";"</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>o más sencillo, usando la función específica <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv2()</a></code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv2</a></span><span class="op">(</span><span class="va">datos</span>, <span class="st">"ejemplo.csv"</span><span class="op">)</span> <span class="co"># define cabecera y separador ;</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="lectura-de-hojas-de-cálculo-con-readxl" class="level3"><h3 class="anchored" data-anchor-id="lectura-de-hojas-de-cálculo-con-readxl">Lectura de hojas de cálculo con <code>readxl</code>
</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://readxl.tidyverse.org/"><img src="images/readxl.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:20.0%"></a></p>
</figure>
</div>
<p>Uno de los formatos más comunes para almacenar datos son las hojas de cálculo, en particular las creadas con Microsoft Excel. El paquete <code>readxl</code> <span class="citation" data-cites="readxl">(<a href="#ref-readxl" role="doc-biblioref">Wickham y Bryan 2025</a>)</span>, parte del ecosistema <code>tidyverse</code>, permite leer este tipo de archivos.</p>
<p><code>readxl</code> es compatible con hojas de cálculo de Excel 97-2003, con extensión <code>.xls</code>, y con versiones más recientes, con extensión <code>.xlsx</code>.</p>
<p>Una primera función útil es <code><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets()</a></code>, que permite conocer y listar los nombres de las hojas contenidas en un archivo Excel (también llamado libro o <em>workbook</em>).</p>
<p>Por ejemplo, supongamos que tenemos un archivo denominado “<code>datos.xlsx</code><strong>“</strong> y queremos saber por cuantas hojas está compuesto y que nombre tienen:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span> <span class="co"># hay que activarlo independientemente de tidyverse</span></span>
<span></span>
<span><span class="fu"><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets</a></span><span class="op">(</span><span class="st">"datos/datos.xlsx"</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "diabetes"   "vigilancia" "mortalidad"</code></pre>
</div>
</div>
<p>Esto devuelve, por ejemplo, tres hojas: <code>"diabetes"</code>, <code>"vigilancia"</code> y <code>"mortalidad"</code>.</p>
<p>Para leer una de estas hojas utilizamos la función <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code>, cuyos argumentos principales son:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">read_excel</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (path, sheet = NULL, range = NULL, col_names = TRUE, 
    col_types = NULL, na = "", trim_ws = TRUE, skip = 0, n_max = Inf, 
    guess_max = min(1000, n_max), progress = readxl_progress(), 
    .name_repair = "unique") 
NULL</code></pre>
</div>
</div>
<p>Entre los más relevantes encontramos:</p>
<ul>
<li><p><code>path</code>: nombre del archivo y su ubicación (entre comillas)</p></li>
<li><p><code>sheet</code>: nombre de la hoja o su número de orden</p></li>
<li><p><code>col_names</code>: si es <code>TRUE</code>, toma la primera fila como nombres de las columnas</p></li>
<li><p><code>skip</code>: permite saltear un número determinado de filas antes de comenzar la lectura</p></li>
</ul>
<p>Al ejecutar <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code>, internamente se utiliza la función <code><a href="https://readxl.tidyverse.org/reference/excel_format.html">excel_format()</a></code> para detectar si el archivo es <code>.xls</code> o <code>.xlsx</code>, y luego se aplica la función específica para cada caso: <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xls()</a></code> o <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xlsx()</a></code>. Estas funciones también pueden usarse directamente si se desea.</p>
<p>Supongamos ahora que queremos leer la hoja llamada <code>"diabetes"</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diabetes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"datos/datos.xlsx"</span>, </span>
<span>                       sheet <span class="op">=</span> <span class="st">"diabetes"</span>,</span>
<span>                       col_names <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># mostramos las 6 primeras observaciones</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">diabetes</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
    A1C  hba1 GLUCB   SOG Tol_Glucosa    DM    SM  HOMA
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1  6.17   7.9   101   122 IFG             0     1  4.04
2  5.58   7.2   103   100 IFG             0     0  5.03
3  5.38   7.1   103    90 IFG             0     1  2.92
4  5.38   6.6   109    96 IFG             0     1  4.79
5  5.19   6.3   107    69 IFG             0     1  3.06
6  4.89   6      NA   117 IFG             0     0  5.77</code></pre>
</div>
</div>
<p>Observemos que en los argumentos escribimos el nombre del archivo que se encuentra en nuestro proyecto y por lo tanto en nuestra carpeta activa, el nombre de la hoja y nos aseguramos que la primer fila representa a la cabecera de la tabla (sus nombres de variables).</p>
<p>Como <code>readxl</code> forma parte del ecosistema <code>tidyverse</code> el formato de salida es un <em>tibble</em>. En este caso de 23 observaciones por 8 variables.</p>
<p>Ahora leamos la segunda hoja de nombre <code>"vigilancia"</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">vigilancia</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"datos/datos.xlsx"</span>, </span>
<span>                         sheet <span class="op">=</span> <span class="fl">2</span>, </span>
<span>                         col_names <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># mostramos las 6 primeras observaciones</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">vigilancia</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
   ...1 ...2        ...3      ...4  ...5  ...6  ...7 ...8  ...9                 
  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;                
1   875 09/28/2015  2015 544080000     1    31     1 F     VIGILANCIA EN SALUD …
2   875 42317       2015 544080000     1    35     1 F     VIGILANCIA EN SALUD …
3   875 42317       2015 544080000     1    47     1 F     VIGILANCIA EN SALUD …
4   307 09/26/2015  2015 544005273     1    23     1 M     VIGILANCIA INTEGRADA…
5   307 09/24/2015  2015 544005273     1    19     1 M     VIGILANCIA INTEGRADA…
6   875 09/28/2015  2015 544080000     1    63     1 F     VIGILANCIA EN SALUD …</code></pre>
</div>
</div>
<p>En este caso, en lugar del nombre de la hoja usamos un <code>2</code> que es su ubicación y especificamos <code>col_names = FALSE</code> porque el conjunto de datos no tiene cabecera. <code>readxl</code> asignará nombres genéricos como <code>...1</code>, <code>...2</code>, etc.</p>
<p>Finalmente leamos la última hoja disponible del archivo:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mortalidad</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"datos/datos.xlsx"</span>, </span>
<span>                         sheet <span class="op">=</span> <span class="st">"mortalidad"</span>,</span>
<span>                         col_names <span class="op">=</span> <span class="cn">T</span>, </span>
<span>                         skip <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># mostramos las 6 primeras observaciones</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">mortalidad</span><span class="op">)</span> </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 10
  grupo_edad grupo.I.1.1 grupo.II.1.1 grupo.III.1.1 grupo.I.2.1 grupo.II.2.1
  &lt;chr&gt;            &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
1 30-44               41          202           222         539         1438
2 45-59               99         1071           181         759         6210
3 60-69              114         1782           119         985         9238
4 70-79              221         2336           119        1571        12369
5 80+                362         2492            81        2523        14642
# ℹ 4 more variables: grupo.III.2.1 &lt;dbl&gt;, grupo.I.3.1 &lt;dbl&gt;,
#   grupo.II.3.1 &lt;dbl&gt;, grupo.III.3.1 &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Lo novedoso de esta lectura es el argumento <code>skip = 1</code> que debimos incorporar dado que, en este caso, la hoja de Excel comienza con una línea de título que no pertenece al conjunto de datos. También que el argumento <code>sheet</code> permite el nombre de la hoja elegida entre comillas.</p>
<p>Además de los argumentos generales de <code>read_xl()</code>, podemos mencionar estos otros:</p>
<ul>
<li><p><code>n_max</code>: número máximo de filas a leer.</p></li>
<li><p><code>range</code>: rango de celdas a importar (como en Excel, por ejemplo <code>"B3:D87"</code>).</p></li>
<li><p><code>col_types</code>: define el tipo de datos de cada columna. Valores posibles: <code>"numeric"</code>, <code>"logical"</code>, <code>"text"</code>, <code>"date"</code>, <code>"skip"</code> (no leer la columna), <code>"guess"</code> (modo predeterminado: la función decide automáticamente el tipo).</p></li>
<li><p><code>na</code>: carácter o vector de caracteres que se deben interpretar como valores perdidos (<code>NA</code>). Por defecto, las celdas vacías se interpretan así.</p></li>
</ul></section></section><section id="gestión-de-datos-con-dplyr" class="level2"><h2 class="anchored" data-anchor-id="gestión-de-datos-con-dplyr">Gestión de datos con <code>dplyr</code>
</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://dplyr.tidyverse.org/"><img src="images/dplyr.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:20.0%"></a></p>
</figure>
</div>
<p>El paquete <code>dplyr</code> <span class="citation" data-cites="dplyr">(<a href="#ref-dplyr" role="doc-biblioref">Wickham et&nbsp;al. 2023</a>)</span> fue desarrollado por <em>Hadley Wickham</em> como una versión optimizada del paquete <code>plyr</code> <span class="citation" data-cites="plyr">(<a href="#ref-plyr" role="doc-biblioref">Wickham 2011</a>)</span>.</p>
<p>Su principal contribución es ofrecer una <em>gramática</em> para la manipulación de datos, basada en funciones que actúan como verbos, lo que facilita la lectura y comprensión del código.</p>
<p>Las funciones clave del paquete permiten realizar las siguientes acciones (verbos):</p>
<ul>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>: selecciona un conjunto de columnas (variables)</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename()</a></code>: renombra variables en un conjunto de datos</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>: selecciona un conjunto de filas (observaciones) según una o varias condiciones lógicas</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>: reordena las filas de un conjunto de datos</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>: añade nuevas variables/columnas o transforma variables existentes</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>/<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code>: genera resúmenes estadísticos de diferentes variables en el conjunto de datos</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>: agrupa las observaciones en función de una o más variables, lo que permite realizar operaciones por grupo</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code>: contabiliza valores que se repiten, generando una tabla de frecuencias</li>
</ul>
<p>Además, al ser parte del ecosistema <em>tidyverse</em>, <code>dplyr</code> integra al operador <code>%&gt;%</code> (<em>pipe</em>) formando una única secuencia de procesamiento o <em>pipeline</em>.</p>
<section id="argumentos-comunes-en-las-funciones-dplyr" class="level3"><h3 class="anchored" data-anchor-id="argumentos-comunes-en-las-funciones-dplyr">Argumentos comunes en las funciones <strong><code>dplyr</code></strong>
</h3>
<p>Todas las funciones, básicamente, tienen en común una serie de argumentos.</p>
<ol type="1">
<li><p>El primer argumento es el nombre del conjunto de datos (objeto donde esta nuestra tabla de datos).</p></li>
<li><p>Los otros argumentos describen que hacer con el conjunto de datos especificado en el primer argumento, podemos referirnos a las columnas en el objeto directamente sin utilizar el operador <code>$</code>, es decir sólo con el nombre de la columna/variable.</p></li>
<li><p>El valor de retorno es un nuevo conjunto de datos.</p></li>
<li><p>Los conjuntos de datos deben estar bien organizados/estructurados, es decir debe existir una observación por columna y, cada columna representar una variable, medida o característica de esa observación. Es decir, debe cumplir con <em>tidy data</em>.</p></li>
</ol></section><section id="activación-del-paquete" class="level3"><h3 class="anchored" data-anchor-id="activación-del-paquete">Activación del paquete</h3>
<p><code>dplyr</code> está incluído en el núcleo base de <em>tidyverse</em>, por lo que se encuentra disponible si tenemos activado a este último.</p>
<p>También se puede activar en forma independiente:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="conjunto-de-datos-para-ejemplo" class="level3"><h3 class="anchored" data-anchor-id="conjunto-de-datos-para-ejemplo">Conjunto de datos para ejemplo</h3>
<p>Para visualizar y comprender el funcionamiento de estos “verbos” de manipulación, resulta muy útil contar con ejemplos concretos. Por eso, en esta unidad trabajaremos con un conjunto de datos que nos permitirá practicar el uso de las funciones del paquete.</p>
<blockquote class="blockquote">
<p>Recuerden que pueden <a href="../files/datos_y_paquetes.zip"><strong>descargar los datos</strong></a> utilizados en los ejemplos del curso y descomprimirlos en la carpeta donde tengan guardado su proyecto de RStudio.</p>
</blockquote>
<p>Uno de los archivos incluidos, “<code>noti-vih.csv</code>”, contiene registros de notificaciones de VIH por jurisdicción en Argentina correspondientes a los años 2015 y 2016.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># asignamos la lectura a datos</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"datos/noti-vih.csv"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># mostramos las 6 primeras observaciones</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  jurisdiccion   año casos      pob
  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 Buenos Aires  2015  1513 16626374
2 Buenos Aires  2016   957 16789474
3 CABA          2015   901  3054237
4 CABA          2016   427  3050000
5 Catamarca     2015    69   396552
6 Catamarca     2016    51   401575</code></pre>
</div>
</div>
</section><section id="función-select" class="level3"><h3 class="anchored" data-anchor-id="función-select">Función <code>select()</code>
</h3>
<p>La función <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> permite elegir columnas específicas de un conjunto de datos, devolviendo una versión “recortada por columnas” del mismo.</p>
<p>A continuación, exploramos algunas formas útiles de seleccionar variables:</p>
<p>Seleccionar todas las variables excepto <code>pob</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">pob</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 3
   jurisdiccion   año casos
   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;
 1 Buenos Aires  2015  1513
 2 Buenos Aires  2016   957
 3 CABA          2015   901
 4 CABA          2016   427
 5 Catamarca     2015    69
 6 Catamarca     2016    51
 7 Chaco         2015    15
 8 Chaco         2016     9
 9 Chubut        2015   110
10 Chubut        2016    89
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>Otra forma para el mismo resultado anterior (mediante el operador rango <code>:</code>):</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">jurisdiccion</span><span class="op">:</span><span class="va">casos</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 3
   jurisdiccion   año casos
   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;
 1 Buenos Aires  2015  1513
 2 Buenos Aires  2016   957
 3 CABA          2015   901
 4 CABA          2016   427
 5 Catamarca     2015    69
 6 Catamarca     2016    51
 7 Chaco         2015    15
 8 Chaco         2016     9
 9 Chubut        2015   110
10 Chubut        2016    89
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>Seleccionar solamente las variables <code>jurisdiccion</code> y <code>casos</code><em>:</em></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">jurisdiccion</span>, <span class="va">casos</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 2
   jurisdiccion casos
   &lt;chr&gt;        &lt;dbl&gt;
 1 Buenos Aires  1513
 2 Buenos Aires   957
 3 CABA           901
 4 CABA           427
 5 Catamarca       69
 6 Catamarca       51
 7 Chaco           15
 8 Chaco            9
 9 Chubut         110
10 Chubut          89
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>Lo mismo que el ejemplo anterior, pero usando la posición de las columnas:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 2
   jurisdiccion casos
   &lt;chr&gt;        &lt;dbl&gt;
 1 Buenos Aires  1513
 2 Buenos Aires   957
 3 CABA           901
 4 CABA           427
 5 Catamarca       69
 6 Catamarca       51
 7 Chaco           15
 8 Chaco            9
 9 Chubut         110
10 Chubut          89
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>Mover la variable <code>año</code> al inicio y mantener todas las demás:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="st">"año"</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 4
     año jurisdiccion casos      pob
   &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;    &lt;dbl&gt;
 1  2015 Buenos Aires  1513 16626374
 2  2016 Buenos Aires   957 16789474
 3  2015 CABA           901  3054237
 4  2016 CABA           427  3050000
 5  2015 Catamarca       69   396552
 6  2016 Catamarca       51   401575
 7  2015 Chaco           15  1153846
 8  2016 Chaco            9  1125000
 9  2015 Chubut         110   567010
10  2016 Chubut          89   577922
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>Otros posibles argumentos son:</p>
<ul>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code>: selecciona todas las columnas que comiencen con el patrón indicado.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code>: selecciona todas las columnas que terminen con el patrón indicado.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code>: selecciona las columnas que posean el patrón indicado.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches()</a></code>: similar a <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code>, pero permite poner una expresión regular.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/all_of.html">all_of()</a></code>: selecciona las variables pasadas en un vector (todos los nombres deben estar presentes o devuelve un error).</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of()</a></code>: idem anterior excepto que no se genera ningún error para los nombres que no existen.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">num_range()</a></code>: selecciona variables con nombre combinados con caracteres y números (ejemplo: <code>num_range("x", 1:3)</code> selecciona las variables <code>x1</code>, <code>x2</code> y <code>x3</code>.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/where.html">where()</a></code>: aplica una función a todas las variables y selecciona aquellas para las cuales la función regresa TRUE (por ejemplo: <code><a href="https://rdrr.io/r/base/numeric.html">is.numeric()</a></code> para seleccionar todas las variables numéricas).</p></li>
</ul></section><section id="función-rename" class="level3"><h3 class="anchored" data-anchor-id="función-rename">Función <code>rename()</code>
</h3>
<p>La función <code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename()</a></code> puede considerarse una extensión de <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>. Si bien <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> también permite renombrar variables, no resulta muy útil para este fin, ya que descarta todas las variables que no se mencionan explícitamente.</p>
<p>En cambio, <code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename()</a></code> permite cambiar el nombre de una o más variables sin eliminar las demás. Solo se modifican los nombres indicados, y el resto del conjunto de datos permanece sin cambios.</p>
<p>Ejemplo: renombrar la variable <code>pob</code> como <code>población</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span><span class="st">"población"</span> <span class="op">=</span> <span class="va">pob</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 4
   jurisdiccion   año casos población
   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;
 1 Buenos Aires  2015  1513  16626374
 2 Buenos Aires  2016   957  16789474
 3 CABA          2015   901   3054237
 4 CABA          2016   427   3050000
 5 Catamarca     2015    69    396552
 6 Catamarca     2016    51    401575
 7 Chaco         2015    15   1153846
 8 Chaco         2016     9   1125000
 9 Chubut        2015   110    567010
10 Chubut        2016    89    577922
# ℹ 38 more rows</code></pre>
</div>
</div>
</section><section id="función-filter" class="level3"><h3 class="anchored" data-anchor-id="función-filter">Función <code>filter()</code>
</h3>
<p>La función <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> permite seleccionar filas de un conjunto de datos, produciendo un subconjunto de observaciones.</p>
<p>Veamos un ejemplo sencillo con nuestros datos:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">jurisdiccion</span> <span class="op">==</span> <span class="st">"Tucuman"</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  jurisdiccion   año casos     pob
  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
1 Tucuman       2015   258 1592593
2 Tucuman       2016   246 1618421</code></pre>
</div>
</div>
<p>Utiliza los mismos operadores de comparación propios del lenguaje R:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="table table-condensed table-hover caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF; color: white !important; background-color: rgba(47, 46, 78, 255) !important;">Operador</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF; color: white !important; background-color: rgba(47, 46, 78, 255) !important;">Descripción</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">&lt;</td>
<td style="text-align: left;">Menor que</td>
</tr>
<tr class="even">
<td style="text-align: left;">&gt;</td>
<td style="text-align: left;">Menor que</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&lt;=</td>
<td style="text-align: left;">Menor o igual que</td>
</tr>
<tr class="even">
<td style="text-align: left;">&gt;=</td>
<td style="text-align: left;">Mayor o igual que</td>
</tr>
<tr class="odd">
<td style="text-align: left;">==</td>
<td style="text-align: left;">Igual que</td>
</tr>
<tr class="even">
<td style="text-align: left;">!=</td>
<td style="text-align: left;">No igual que</td>
</tr>
<tr class="odd">
<td style="text-align: left;">%in%</td>
<td style="text-align: left;">Es parte de</td>
</tr>
<tr class="even">
<td style="text-align: left;">is.na()</td>
<td style="text-align: left;">Es un valor ausente</td>
</tr>
<tr class="odd">
<td style="text-align: left;">!is.na()</td>
<td style="text-align: left;">No es un valor ausente</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Lo mismo con los operadores lógicos que se utilizan como conectores entre las expresiones:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="table table-condensed table-hover caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF; color: white !important; background-color: rgba(47, 46, 78, 255) !important;">Operador</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF; color: white !important; background-color: rgba(47, 46, 78, 255) !important;">Descripción</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">&amp;</td>
<td style="text-align: left;">AND booleano</td>
</tr>
<tr class="even">
<td style="text-align: left;">|</td>
<td style="text-align: left;">OR booleano</td>
</tr>
<tr class="odd">
<td style="text-align: left;">xor()</td>
<td style="text-align: left;">OR exclusivo</td>
</tr>
<tr class="even">
<td style="text-align: left;">!</td>
<td style="text-align: left;">NOT</td>
</tr>
<tr class="odd">
<td style="text-align: left;">any()</td>
<td style="text-align: left;">cualquier TRUE</td>
</tr>
<tr class="even">
<td style="text-align: left;">all()</td>
<td style="text-align: left;">todos TRUE</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Cuando usamos múltiples argumentos separados por coma dentro de <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>, estas se combinan con un operador <strong>AND</strong> implícito, es decir, cada expresión debe ser verdadera para que la fila sea incluida en la salida.</p>
<p>Por ejemplo, filtramos las observaciones que cumplan que <code>casos</code> sea mayor a 100 <strong>y</strong> que <code>pob</code> sea menor a 1.000.000:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">casos</span> <span class="op">&gt;</span> <span class="fl">100</span>, <span class="va">pob</span> <span class="op">&lt;</span> <span class="fl">1000000</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  jurisdiccion   año casos    pob
  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
1 Chubut        2015   110 567010
2 Jujuy         2015   160 727273
3 Jujuy         2016   133 734807
4 Neuquen       2015   109 619318
5 Neuquen       2016   101 627329
6 Rio Negro     2015   112 700000
7 Rio Negro     2016   105 709459</code></pre>
</div>
</div>
<p>Para combinar condiciones dentro de una misma variable usamos el operador OR (<code>|</code>) o, de forma más práctica, <code>%in%</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Con OR</span></span>
<span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">jurisdiccion</span> <span class="op">==</span> <span class="st">"Buenos Aires"</span> <span class="op">|</span> <span class="va">jurisdiccion</span> <span class="op">==</span> <span class="st">"La Pampa"</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  jurisdiccion   año casos      pob
  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 Buenos Aires  2015  1513 16626374
2 Buenos Aires  2016   957 16789474
3 La Pampa      2015    57   343373
4 La Pampa      2016    67   345361</code></pre>
</div>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Con %in%</span></span>
<span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">jurisdiccion</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Buenos Aires"</span>, <span class="st">"La Pampa"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  jurisdiccion   año casos      pob
  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 Buenos Aires  2015  1513 16626374
2 Buenos Aires  2016   957 16789474
3 La Pampa      2015    57   343373
4 La Pampa      2016    67   345361</code></pre>
</div>
</div>
<p>En el siguiente ejemplo, filtramos observaciones del año 2016 con más de 200 casos. El uso de <code>&amp;</code> es equivalente al uso de coma:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">año</span> <span class="op">==</span> <span class="st">"2016"</span> <span class="op">&amp;</span> <span class="va">casos</span> <span class="op">&gt;</span> <span class="fl">200</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  jurisdiccion   año casos      pob
  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 Buenos Aires  2016   957 16789474
2 CABA          2016   427  3050000
3 Cordoba       2016   368  3607843
4 Mendoza       2016   254  1909774
5 Salta         2016   230  1352941
6 Tucuman       2016   246  1618421</code></pre>
</div>
</div>
<p>Por último, podemos usar <code><a href="https://rdrr.io/r/base/Logic.html">xor()</a></code> para seleccionar observaciones que cumplan <strong>solo una</strong> de las condiciones, pero no ambas. Por ejemplo, el siguiente filtro selecciona registros donde el año sea 2016 ó los casos sean mayores a 200, pero no ambos al mismo tiempo (es decir que no se den ambos en <code>TRUE</code>):</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Logic.html">xor</a></span><span class="op">(</span><span class="va">año</span> <span class="op">==</span> <span class="st">"2016"</span>, <span class="va">casos</span> <span class="op">&gt;</span> <span class="fl">200</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 25 × 4
   jurisdiccion   año casos      pob
   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
 1 Buenos Aires  2015  1513 16626374
 2 CABA          2015   901  3054237
 3 Catamarca     2016    51   401575
 4 Chaco         2016     9  1125000
 5 Chubut        2016    89   577922
 6 Cordoba       2015   468  3572519
 7 Corrientes    2016    99  1076087
 8 Entre Rios    2016   109  1329268
 9 Formosa       2016    60   582524
10 Jujuy         2016   133   734807
# ℹ 15 more rows</code></pre>
</div>
</div>
</section><section id="función-arrange" class="level3"><h3 class="anchored" data-anchor-id="función-arrange">Función <code>arrange()</code>
</h3>
<p>La función <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> se utiliza para ordenar las filas de un conjunto de datos de acuerdo a una o varias columnas/variables. Por defecto, el ordenamiento es ascendente alfanumérico.</p>
<p>Ordenamos la tabla por la variable <code>pob</code> (forma ascendente predeterminada):</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">pob</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 4
   jurisdiccion       año casos    pob
   &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1 Tierra del Fuego  2015    36 152542
 2 Tierra del Fuego  2016    34 156682
 3 Santa Cruz        2015    65 320197
 4 Santa Cruz        2016    59 329609
 5 La Pampa          2015    57 343373
 6 La Pampa          2016    67 345361
 7 La Rioja          2015    41 369369
 8 La Rioja          2016     6 375000
 9 Catamarca         2015    69 396552
10 Catamarca         2016    51 401575
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>Para ordenar en forma descendente podemos utilizar <code><a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a></code> dentro de los argumentos de <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">pob</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 4
   jurisdiccion   año casos      pob
   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
 1 Buenos Aires  2016   957 16789474
 2 Buenos Aires  2015  1513 16626374
 3 Cordoba       2016   368  3607843
 4 Cordoba       2015   468  3572519
 5 Santa Fe      2016   170  3400000
 6 Santa Fe      2015   301  3382022
 7 CABA          2015   901  3054237
 8 CABA          2016   427  3050000
 9 Mendoza       2016   254  1909774
10 Mendoza       2015   316  1880952
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>Podemos combinar ordenamientos. Por ejemplo, en forma alfabética ascendente para <em>jusrisdiccion</em> y luego numérica descendente para <em>casos</em>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">jurisdiccion</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">casos</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 4
   jurisdiccion   año casos      pob
   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
 1 Buenos Aires  2015  1513 16626374
 2 Buenos Aires  2016   957 16789474
 3 CABA          2015   901  3054237
 4 CABA          2016   427  3050000
 5 Catamarca     2015    69   396552
 6 Catamarca     2016    51   401575
 7 Chaco         2015    15  1153846
 8 Chaco         2016     9  1125000
 9 Chubut        2015   110   567010
10 Chubut        2016    89   577922
# ℹ 38 more rows</code></pre>
</div>
</div>
</section><section id="función-mutate" class="level3"><h3 class="anchored" data-anchor-id="función-mutate">Función <code>mutate()</code>
</h3>
<p>Esta función nos permite transformar variables dentro de un conjunto de datos. A menudo tendremos la necesidad de modificar variables existentes o crear nuevas variables a partir de las ya disponibles. La función <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> nos ofrece una forma clara y eficiente de realizar este tipo de operaciones.</p>
<p>Por ejemplo, podríamos querer calcular tasas crudas para cada jurisdicción y año, en función del número de casos y de la población total:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    tasa <span class="op">=</span> <span class="va">casos</span><span class="op">/</span><span class="va">pob</span><span class="op">*</span><span class="fl">100000</span></span>
<span>  <span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 5
   jurisdiccion   año casos      pob  tasa
   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
 1 Buenos Aires  2015  1513 16626374  9.10
 2 Buenos Aires  2016   957 16789474  5.70
 3 CABA          2015   901  3054237 29.5 
 4 CABA          2016   427  3050000 14   
 5 Catamarca     2015    69   396552 17.4 
 6 Catamarca     2016    51   401575 12.7 
 7 Chaco         2015    15  1153846  1.30
 8 Chaco         2016     9  1125000  0.8 
 9 Chubut        2015   110   567010 19.4 
10 Chubut        2016    89   577922 15.4 
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>En este caso, <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> calcula la tasa cruda por 100.000 habitantes e incorpora una nueva variable (<code>tasa</code>) con los resultados correspondientes a cada observación.</p>
<p>También se pueden construir múltiples variables en la misma expresión, solamente separadas por comas:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    tasaxcien_mil <span class="op">=</span> <span class="va">casos</span><span class="op">/</span><span class="va">pob</span><span class="op">*</span><span class="fl">100000</span>,</span>
<span>    tasaxdiez_mil <span class="op">=</span> <span class="va">casos</span><span class="op">/</span><span class="va">pob</span><span class="op">*</span><span class="fl">10000</span></span>
<span>  <span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 6
   jurisdiccion   año casos      pob tasaxcien_mil tasaxdiez_mil
   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
 1 Buenos Aires  2015  1513 16626374          9.10         0.910
 2 Buenos Aires  2016   957 16789474          5.70         0.570
 3 CABA          2015   901  3054237         29.5          2.95 
 4 CABA          2016   427  3050000         14            1.4  
 5 Catamarca     2015    69   396552         17.4          1.74 
 6 Catamarca     2016    51   401575         12.7          1.27 
 7 Chaco         2015    15  1153846          1.30         0.130
 8 Chaco         2016     9  1125000          0.8          0.08 
 9 Chubut        2015   110   567010         19.4          1.94 
10 Chubut        2016    89   577922         15.4          1.54 
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>Si deseamos que estas nuevas variables se incorporen de forma permanente al conjunto de datos (y no solo se muestren en la consola), debemos utilizar el operador de asignación <code>&lt;-</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    tasaxcien_mil <span class="op">=</span> <span class="va">casos</span><span class="op">/</span><span class="va">pob</span><span class="op">*</span><span class="fl">100000</span>,</span>
<span>    tasaxdiez_mil <span class="op">=</span> <span class="va">casos</span><span class="op">/</span><span class="va">pob</span><span class="op">*</span><span class="fl">10000</span></span>
<span>  <span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Un aspecto fundamental es que las funciones utilizadas dentro de <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> deben estar <em>vectorizadas</em>: deben aceptar un vector de entrada y devolver otro vector del mismo tamaño como salida.</p>
<p>Existen muchas funciones que se pueden utilizar dentro de <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>. A continuación se presentan algunas útiles:</p>
<ul>
<li><p><strong>Operadores aritméticos</strong>: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>^</code>.</p></li>
<li><p><strong>Aritmética modular</strong>: <code>%/%</code> (división entera) y <code>%%</code> (resto), donde <code>x == y * (x %/% y) + (x %% y)</code>. Esta herramienta resulta útil para dividir números enteros en porciones.</p></li>
<li><p><strong>Funciones matemáticas</strong>: <code><a href="https://rdrr.io/r/base/Log.html">log()</a></code>, <code><a href="https://rdrr.io/r/base/Log.html">log2()</a></code>, <code><a href="https://rdrr.io/r/base/Log.html">log10()</a></code>, <code><a href="https://rdrr.io/r/base/Log.html">exp()</a></code>, <code><a href="https://rdrr.io/r/base/MathFun.html">sqrt()</a></code>, <code><a href="https://rdrr.io/r/base/MathFun.html">abs()</a></code>, entre otras.</p></li>
<li><p><strong>Valores acumulados</strong>: R ofrece funciones como <code><a href="https://rdrr.io/r/base/cumsum.html">cumsum()</a></code>, <code><a href="https://rdrr.io/r/base/cumsum.html">cumprod()</a></code>, <code><a href="https://rdrr.io/r/base/cumsum.html">cummin()</a></code>, <code><a href="https://rdrr.io/r/base/cumsum.html">cummax()</a></code> y <code>dplyr</code> incluye <code><a href="https://dplyr.tidyverse.org/reference/cumall.html">cummean()</a></code> para promedios acumulados.</p></li>
<li><p><strong>Clasificación o <em>ranking</em></strong>: funciones como <code><a href="https://dplyr.tidyverse.org/reference/row_number.html">min_rank()</a></code> permiten asignar rangos (1º, 2º, etc.). Por defecto, los valores más pequeños reciben rangos más bajos. Si se desea invertir el orden, puede utilizarse <code>desc(x)</code>.</p></li>
</ul>
<p>Finalmente, si se utiliza en <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> el mismo nombre de una variable que ya existe en la tabla, dicha variable será sobrescrita (por ejemplo, al cambiarle el tipo de <code>character</code> a <code>factor</code>). Si se desea crear una variable nueva, se debe utilizar un nombre que no esté previamente en el conjunto de datos.</p>
</section><section id="función-summarise" class="level3"><h3 class="anchored" data-anchor-id="función-summarise">Función <code>summarise()</code>
</h3>
<p>La función <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> o <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> se utiliza para calcular resúmenes estadísticos a partir de una o más variables de un conjunto de datos.</p>
<p>Por ejemplo, podemos calcular el promedio y el total de casos:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    promedio_casos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">casos</span><span class="op">)</span>, </span>
<span>    casos_totales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">casos</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  promedio_casos casos_totales
           &lt;dbl&gt;         &lt;dbl&gt;
1           192.          9211</code></pre>
</div>
</div>
<p>Su uso es muy interesante cuando la combinamos con <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> (función que detallaremos luego). Esta situación permite estratificar los resultados por grupos específicos.</p>
<p>Por ejemplo, podemos agrupar el por año y simultáneamente aplicar el mismo <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> anterior:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">año</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    promedio_casos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">casos</span><span class="op">)</span>, </span>
<span>    casos_totales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">casos</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
    año promedio_casos casos_totales
  &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;
1  2015           224.          5369
2  2016           160.          3842</code></pre>
</div>
</div>
<p>El resultado es una tabla con dos filas, una para cada grupo (año 2015 y año 2016) con los valores promedio y casos totales respectivos.</p>
<p>Algunas de las funciones del R <code>base</code> que se pueden utilizar dentro de los argumentos de esta función son:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>: mínimo</li>
<li>
<code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code>: máximo</li>
<li>
<code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>: media</li>
<li>
<code><a href="https://rdrr.io/r/stats/median.html">median()</a></code>: mediana</li>
<li>
<code><a href="https://rdrr.io/r/stats/cor.html">var()</a></code>: varianza</li>
<li>
<code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code>: desvío</li>
<li>
<code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>: sumatoria</li>
</ul>
<p>Otras funciones que se pueden incorporar las provee el mismo paquete <code>dplyr</code>, por ejemplo:</p>
<ul>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/nth.html">first()</a></code>: primer valor en el vector.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/nth.html">last()</a></code>: último valor en el vector.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/context.html">n()</a></code>: número de valores en el vector.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct()</a></code>: números de valores distintos en el vector.</li>
</ul></section><section id="función-group_by" class="level3"><h3 class="anchored" data-anchor-id="función-group_by">Función <code>group_by()</code>
</h3>
<p>Como mencionamos anteriormente, la función <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> resulta especialmente útil cuando se utiliza en combinación con <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>, dado que agrupa un conjunto de filas seleccionado según los valores de una o más columnas antes de aplicar funciones de resumen.</p>
<p>Al aplicar <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>, el conjunto de datos se estructura internamente en subgrupos definidos por las variables indicadas. Las funciones que se apliquen a continuación (por ejemplo, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> o <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>) se ejecutarán dentro de cada grupo de forma independiente.</p>
<p>Por ejemplo, podemos calcular las tasas crudas por 100.000 habitantes para cada combinación de jurisdicción y año:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">jurisdiccion</span>, <span class="va">año</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>tasa <span class="op">=</span> <span class="va">casos</span><span class="op">/</span><span class="va">pob</span><span class="op">*</span><span class="fl">100000</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 3
# Groups:   jurisdiccion [24]
   jurisdiccion   año  tasa
   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;
 1 Buenos Aires  2015  9.10
 2 Buenos Aires  2016  5.70
 3 CABA          2015 29.5 
 4 CABA          2016 14   
 5 Catamarca     2015 17.4 
 6 Catamarca     2016 12.7 
 7 Chaco         2015  1.30
 8 Chaco         2016  0.8 
 9 Chubut        2015 19.4 
10 Chubut        2016 15.4 
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>En la mayoría de estos ejemplos, la salida es directa, es decir, no construimos nuevos objetos. Sin embargo, en muchas situaciones vamos a necesitar conservar los resultados obtenidos, asignándolos a un nuevo objeto.</p>
<p>Además, si en algún momento aplicamos <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> y luego queremos continuar trabajando con los datos sin agrupamientos, podemos utilizar la función <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup()</a></code>, que elimina la estructura de agrupamiento:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">jurisdiccion</span>, <span class="va">año</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>tasa <span class="op">=</span> <span class="va">casos</span> <span class="op">/</span> <span class="va">pob</span> <span class="op">*</span> <span class="fl">100000</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 3
   jurisdiccion   año  tasa
   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;
 1 Buenos Aires  2015  9.10
 2 Buenos Aires  2016  5.70
 3 CABA          2015 29.5 
 4 CABA          2016 14   
 5 Catamarca     2015 17.4 
 6 Catamarca     2016 12.7 
 7 Chaco         2015  1.30
 8 Chaco         2016  0.8 
 9 Chubut        2015 19.4 
10 Chubut        2016 15.4 
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>Esto resulta útil cuando queremos realizar otras operaciones posteriores que no dependen de los grupos definidos previamente.</p>
</section><section id="combinaciones" class="level3"><h3 class="anchored" data-anchor-id="combinaciones">Combinaciones</h3>
<p>En los ejemplos anteriores vimos cómo se van integrando algunas de las funciones mediante el uso del operador de tubería <code>%&gt;%</code> o <code>|&gt;</code>. La idea detrás de esta “<em>gramática de los datos</em>” que propone el paquete <code>dplyr</code> es poder encadenar acciones de forma legible y lógica, construyendo oraciones más complejas paso a paso.</p>
<p>Veamos un ejemplo que integra muchas de las funciones vistas hasta ahora:</p>
<blockquote class="blockquote">
<p>Obtener una nueva tabla con las tasas crudas de casos notificados de VIH, por año y jurisdicción, <strong>mayores a 20 por 100.000 habitantes</strong>, ordenadas de <strong>mayor a menor</strong>.</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span>                                  <span class="co"># siempre partimos de los datos</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">año</span>, <span class="va">jurisdiccion</span><span class="op">)</span> <span class="op">|&gt;</span>          <span class="co"># agrupamos</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>tasa <span class="op">=</span> <span class="va">casos</span><span class="op">/</span><span class="va">pob</span><span class="op">*</span><span class="fl">100000</span><span class="op">)</span> <span class="op">|&gt;</span>   <span class="co"># resumimos</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">tasa</span> <span class="op">&gt;</span> <span class="fl">20</span><span class="op">)</span> <span class="op">|&gt;</span>                    <span class="co"># filtramos</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">tasa</span><span class="op">)</span><span class="op">)</span>                     <span class="co"># ordenamos   </span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
# Groups:   año [2]
    año jurisdiccion      tasa
  &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;
1  2015 CABA              29.5
2  2015 Tierra del Fuego  23.6
3  2015 Jujuy             22.0
4  2016 Tierra del Fuego  21.7
5  2015 Santa Cruz        20.3</code></pre>
</div>
</div>
<p>Una buena práctica para construir este tipo de código es escribir cada paso de la operación <strong>en una línea separada</strong>. Esto no solo mejora la legibilidad, sino que facilita la identificación de errores o la modificación de pasos específicos.</p>
<p>Este ejemplo muestra claramente el poder y la claridad que se logran al combinar funciones como <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> y <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> en una misma operación fluida y coherente.</p>
</section><section id="función-count" class="level3"><h3 class="anchored" data-anchor-id="función-count">Función <code>count()</code>
</h3>
<p>Esta función permite contar rápidamente los valores únicos de una o más variables en un conjunto de datos. Es especialmente útil para crear tablas de frecuencias absolutas, que posteriormente pueden ser usadas para calcular frecuencias relativas.</p>
<p>Un ejemplo básico de su uso es contar las observaciones por cada valor único de la variable <code>jurisdiccion</code> en el conjunto de datos:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">datos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">jurisdiccion</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 2
   jurisdiccion     n
   &lt;chr&gt;        &lt;int&gt;
 1 Buenos Aires     2
 2 CABA             2
 3 Catamarca        2
 4 Chaco            2
 5 Chubut           2
 6 Cordoba          2
 7 Corrientes       2
 8 Entre Rios       2
 9 Formosa          2
10 Jujuy            2
# ℹ 14 more rows</code></pre>
</div>
</div>
<p>Tiene un par de argumentos opcionales:</p>
<ul>
<li><p><code>name</code>: Define el nombre de la columna que contendrá el conteo. Por defecto, esta columna se llama <code>n</code>.</p></li>
<li><p><code>sort</code>: Ordena la tabla de frecuencias de mayor a menor (por defecto, no realiza ninguna ordenación).</p></li>
<li><p><code>wt</code>: Permite incorporar una variable que funcione como ponderación (o factor de expansión) para el cálculo de la frecuencia.</p></li>
</ul></section></section><section id="gráficos-estadísticos-con-ggplot2" class="level2"><h2 class="anchored" data-anchor-id="gráficos-estadísticos-con-ggplot2">Gráficos estadísticos con <code>ggplot2</code>
</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://ggplot2.tidyverse.org/"><img src="images/ggplot.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:20.0%"></a></p>
</figure>
</div>
<p>El paquete <code>ggplot2</code> <span class="citation" data-cites="ggplot2">(<a href="#ref-ggplot2" role="doc-biblioref">Wickham 2016</a>)</span> se autodefine como una librería para “<em>crear elegantes visualizaciones de datos utilizando una gramática de gráficos</em>”. Proporciona una forma intuitiva de construir gráficos basada en <a href="https://www.springer.com/gp/book/9780387245447">The Grammar of Graphics</a> a través de un sistema basado en tres componentes básicos:</p>
<ul>
<li>datos</li>
<li>coordenadas</li>
<li>objetos geométricos</li>
</ul>
<p>La estructura para construir un gráfico es la siguiente:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/ggplot_estruct.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
<section id="anatomía-de-gráficos-con-ggplot2" class="level3"><h3 class="anchored" data-anchor-id="anatomía-de-gráficos-con-ggplot2">Anatomía de gráficos con <code>ggplot2</code>
</h3>
<p>La estructura básica para construir un gráfico con <code>ggplot2</code> se organiza a partir de una gramática de gráficos, que se puede entender a través de sus componentes fundamentales:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/ggplot_comp.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:55.0%"></p>
</figure>
</div>
<ul>
<li>
<code>data</code>: el conjunto de datos que vamos a graficar, que debe contener toda la información necesaria para crear el gráfico.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>: el mapeo estético (<em>aesthetic mapping</em>) es donde se declaran las variables que se van a mapear en el gráfico (por ejemplo, qué variable va en el eje X, en el eje Y, o cómo se asignan los colores).</li>
<li>
<code>geoms</code>: representaciones gráficas de los datos, como puntos, líneas, barras, cajas, entre otros. Son los “objetos geométricos” que realmente dibujan el gráfico.</li>
<li>
<code>stats</code>: Transformaciones estadísticas que se realizan sobre los datos, como el cálculo de medias, medias móviles o regresiones, que ayudan a hacer un resumen de los datos para visualizarlos mejor.</li>
<li>
<code>scales</code>: se utilizan para colorear o escalar los datos según distintas variables. Controlan los ejes y las leyendas.</li>
<li>
<code>coordinate systems</code>: es el sistema de coordenadas para el mapeo del gráfico en un plano bidimensional.</li>
<li>
<code>facets</code>: permiten dividir el conjunto de datos según factores y crear gráficos en paneles separados (viñetas), creando matrices gráficas.</li>
<li>
<code>theme</code>: son conjuntos de características gráficas que permiten controlar la apariencia general de todos los elementos que no son datos, como el color del fondo, el tipo de fuente o los bordes.</li>
</ul>
<p>Antes de comenzar a mostrar cómo se usan estos componentes en un gráfico, leemos la base de datos de ejemplo “<code>facultad.csv</code>”, que contiene datos ficticios sobre ingresantes a una facultad (por ejemplo, sexo, edad, talla y peso). Usaremos este conjunto de datos para ilustrar los ejemplos gráficos:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Cargar datos</span></span>
<span><span class="va">facultad</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"datos/facultad.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mostramos las 6 primeras observaciones</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">facultad</span><span class="op">)</span> </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 18
     hc sexo   edad ant_diabetes ant_tbc ant_cancer ant_obesidad ant_ecv ant_ht
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt; 
1 26880 M        17 NO           NO      NO         SI           NO      SI    
2 26775 M        18 SI           NO      NO         NO           NO      NO    
3 26877 M        18 SI           NO      SI         NO           NO      SI    
4 26776 M        18 NO           NO      NO         SI           SI      NO    
5 26718 M        18 NO           NO      NO         NO           NO      SI    
6 26738 M        18 NO           NO      NO         NO           NO      SI    
# ℹ 9 more variables: ant_col &lt;chr&gt;, fuma &lt;chr&gt;, edadini &lt;dbl&gt;, cantidad &lt;dbl&gt;,
#   col &lt;dbl&gt;, peso &lt;dbl&gt;, talla &lt;dbl&gt;, sist &lt;dbl&gt;, diast &lt;dbl&gt;</code></pre>
</div>
</div>
</section><section id="mapeo-estético-con-aes-y-capas-geométricas-geom_" class="level3"><h3 class="anchored" data-anchor-id="mapeo-estético-con-aes-y-capas-geométricas-geom_">Mapeo estético con <code>aes()</code> y capas geométricas (<code>geom_</code>)</h3>
<p>Decíamos que la función <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> hace referencia al contenido estético del gráfico. Es decir, le brinda indicaciones a <code>ggplot2</code> sobre cómo dibujar los distintos elementos del gráfico: líneas, formas, colores y tamaños.</p>
<p>Es importante notar que <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> crea una nueva capa vinculada a las variables que se desean mapear, y también agrega automáticamente leyendas cuando corresponde. Al incorporar <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> dentro del llamado a <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>, estamos compartiendo la información estética con todas las capas del gráfico. Si deseamos que esa información sólo esté en una de las capas, debemos usar <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> en la capa correspondiente.</p>
<p>Veamos cómo funciona y cuáles son sus implicancias:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># solo la capa estética aes()</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">talla</span>, y <span class="op">=</span> <span class="va">peso</span><span class="op">)</span><span class="op">)</span> </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>Este código genera un gráfico vacío que contiene únicamente los ejes especificados (<code>peso</code> y <code>talla</code>), pero aún no muestra los datos. Para visualizar los puntos, debemos agregar una capa geométrica usando <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> y enlazarla con el símbolo <code>+</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># mapeo estético</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">talla</span>, y <span class="op">=</span> <span class="va">peso</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># agregamos la capa geométrica de puntos</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span>                    </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>Podemos diferenciar los puntos según sexo incorporando la variable <code>sexo</code> como argumento del color dentro de <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># mapeo estético</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">talla</span>, y <span class="op">=</span> <span class="va">peso</span>, color <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># agregamos la capa geométrica de puntos</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span>  </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>También es posible superponer otras capas geométricas. Por ejemplo, podemos agregar rectas de regresión para cada grupo según <code>sexo</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># mapeo estético</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">talla</span>, y <span class="op">=</span> <span class="va">peso</span>, color <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># agregamos la capa geométrica de puntos</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span>  <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># agregamos una segunda capa geométrica para la recta de regresión</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>La función <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code> permite aplicar distintos métodos de suavizado o ajuste. En este caso usamos <code>"lm"</code> para mostrar la recta de regresión lineal entre <code>talla</code> y <code>peso</code>, junto con sus intervalos de confianza.</p>
<p>A continuación, veremos las diferencias entre incluir <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> en <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> (aplicando el mapeo a todo el gráfico) o colocarlo solo dentro de alguna capa geométrica específica:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># mapeo estético</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">talla</span>, y <span class="op">=</span> <span class="va">peso</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># agregamos la capa geométrica de puntos coloreada por sexo</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># agregamos una segunda capa geométrica para la recta de regresión</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>En este ejemplo, el color solo se especifica dentro de <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>, por lo que los puntos se dibujan diferenciados por sexo, pero no afecta a la capa de <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code> produciendo solo una línea de regresión para el conjunto de puntos.</p>
<p>Este comportamiento brinda gran flexibilidad en la construcción de gráficos, permitiendo definir qué capas deben responder a qué mapeos estéticos.</p>
<p>Algunas otras funciones de <code>geom_</code> son:</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code>: gráfico de líneas.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code>: gráfico de caja y bigotes (<em>boxplot</em>).</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>: histograma.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density()</a></code>: curva de densidad.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code>: gráfico de barras.</p></li>
</ul>
<p>Todas estas funciones pueden aplicarse sobre los mismos datos, y su uso depende del objetivo del análisis.</p>
<p>A continuación, algunos ejemplos para visualizar la relación entre <code>sexo</code> y <code>talla</code> utilizando distintas capas geométricas:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Gráfico de puntos</span></span>
<span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sexo</span>, y <span class="op">=</span> <span class="va">talla</span>, color <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># capa geométrica de puntos</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Boxplot</span></span>
<span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sexo</span>, y <span class="op">=</span> <span class="va">talla</span>, color <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># capa geométrica de boxplot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span>            </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-57-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Entramado de puntos</span></span>
<span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sexo</span>, y <span class="op">=</span> <span class="va">talla</span>, color <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># capa geométrica jitter (entramado de puntos)</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span><span class="op">)</span> </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-57-3.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Gráfico de violín</span></span>
<span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sexo</span>, y <span class="op">=</span> <span class="va">talla</span>, color <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># capa geométrica de violin</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-57-4.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>Observemos que en el último gráfico se usó el argumento <code>fill</code> en lugar de <code>color</code>. Mientras <code>color</code> define el contorno de líneas, curvas o puntos, <code>fill</code> define el <strong>relleno</strong> de objetos geométricos, como los polígonos en gráficos de violín o barras.</p>
</section><section id="personalización-de-escalas-con-scale_" class="level3"><h3 class="anchored" data-anchor-id="personalización-de-escalas-con-scale_">Personalización de escalas con <code>scale_</code>
</h3>
<p>El sistema de escalas en <code>ggplot2</code> permite ajustar múltiples aspectos visuales de un gráfico. Podemos modificar colores de contorno y relleno, invertir ejes, cambiar tamaños, tipos de línea, entre muchas otras opciones.</p>
<p>Todas las funciones relacionadas con escalas comienzan con el prefijo <code>scale_</code>, seguido del atributo que queremos modificar (por ejemplo, <code>scale_fill_</code> para cambiar el color de relleno).</p>
<p>A continuación, mostramos algunos ejemplos aplicados sobre el conjunto de datos <code>facultad</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sexo</span>, y <span class="op">=</span> <span class="va">talla</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># capa geométrica boxplot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># paleta de naranjas</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Oranges"</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>En este ejemplo aplicamos una capa <code><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer()</a></code> con la paleta de colores <code>"Oranges"</code> que se vincula con el argumento <code>fill</code> de <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> y definen los colores del <em>boxplot</em>.</p>
<p>Otra alternativa es aplicar una escala de grises mediante <code><a href="https://ggplot2.tidyverse.org/reference/scale_grey.html">scale_fill_grey()</a></code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sexo</span>, y <span class="op">=</span> <span class="va">talla</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># capa geométrica boxplot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># paleta en escala de grises</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_grey.html">scale_fill_grey</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fl">0.4</span>, end <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>Recomendamos trabajar con paletas de colores accesibles para personas con daltonismo y otras discapacidades visuales, como las incluidas en las dependencias <code>RColorBrewer</code><span class="citation" data-cites="RColorBrewer">(<a href="#ref-RColorBrewer" role="doc-biblioref">Neuwirth 2022</a>)</span> y <code>viridisLite</code>, así como en paquetes específicos con paletas <em>colorblind-friendly</em>, como <code>scico</code> <span class="citation" data-cites="scico">(<a href="#ref-scico" role="doc-biblioref">Pedersen y Crameri 2023</a>)</span>.</p>
</blockquote>
<p>También podemos modificar las escalas de los ejes. Por ejemplo, invertir el eje X con <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_reverse()</a></code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">talla</span>, y <span class="op">=</span> <span class="va">peso</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># capa geométrica de puntos</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># invierte el eje x</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_reverse</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>La inclusión de <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_reverse()</a></code> provoca la variable <code>talla</code> se muestre en orden descendente, de mayor a menor.</p>
<p>Por último, podemos personalizar los cortes del eje Y utilizando <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous()</a></code>. Por ejemplo, en el <em>boxplot</em> pintado en escala de grises, definimos que el eje Y comienza en 130cm y termina en 200cm, con cortes cada 5cm y etiquetas cada 10cm:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sexo</span>, y <span class="op">=</span> <span class="va">talla</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># capa geométrica boxplot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># paleta en escala de grises</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_grey.html">scale_fill_grey</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fl">0.4</span>, end <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span>   <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># puntos de corte del eje Y</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">130</span>, <span class="fl">200</span><span class="op">)</span>,       <span class="co"># límites</span></span>
<span>                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">130</span>, <span class="fl">200</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="co"># nro de etiquetas</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="transformaciones-estadísticas-con-stat_" class="level3"><h3 class="anchored" data-anchor-id="transformaciones-estadísticas-con-stat_">Transformaciones estadísticas con <strong><code>stat_</code></strong>
</h3>
<p>Algunos gráficos en <code>ggplot2</code> no requieren transformaciones estadísticas, como los gráficos de dispersión. Sin embargo, otros tipos —como <em>boxplots</em>, histogramas o líneas de tendencia— sí aplican transformaciones estadísticas predeterminadas que pueden ser modificadas o personalizadas.</p>
<p>Estas transformaciones pueden formar parte de las funciones geométricas, como ocurre en los histogramas, o agregarse como capas independientes mediante funciones <code>stat_</code>.</p>
<p>Por ejemplo, en los histogramas podemos definir la cantidad de intervalos (o “clases”) a través del argumento <code>bins</code>, que forma parte de <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">edad</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># capa geométrica histograma</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/nclass.html">nclass.Sturges</a></span><span class="op">(</span><span class="va">facultad</span><span class="op">$</span><span class="va">edad</span><span class="op">)</span>, </span>
<span>                 fill <span class="op">=</span> <span class="st">"Blue"</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>En este caso, utilizamos la regla de Sturges —a través de la función <code><a href="https://rdrr.io/r/grDevices/nclass.html">nclass.Sturges()</a></code>— para determinar automáticamente la cantidad de clases para la variable <code>edad</code>.</p>
<p>También podemos superponer al gráfico transformaciones estadísticas como capas adicionales. Por ejemplo, si deseamos agregar la media de <code>talla</code> en cada grupo de <code>sexo</code> sobre un <em>boxplot</em>, utilizamos <code><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary()</a></code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sexo</span>, y <span class="op">=</span> <span class="va">talla</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># capa geométrica boxplot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># paleta de tonos verdes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Greens"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># añade capa summary</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">mean</span>, </span>
<span>               color <span class="op">=</span> <span class="st">"darkred"</span>, </span>
<span>               geom <span class="op">=</span> <span class="st">"point"</span>, </span>
<span>               shape <span class="op">=</span> <span class="fl">18</span>, </span>
<span>               size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>La función <code><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary()</a></code> permite aplicar funciones estadísticas como <code>mean</code>, <code>median</code>, <code>sd</code>, entre otras, y representar el resultado con un objeto geométrico, en este caso <code>geom = "point"</code>. En el gráfico, la media de <code>talla</code> se muestra con un punto rojo oscuro (<code>color = "darkred"</code>), de forma romboidal (<code>shape = 18</code>) y tamaño ampliado (<code>size = 3</code>).</p>
</section><section id="facetado-con-facet_" class="level3"><h3 class="anchored" data-anchor-id="facetado-con-facet_">Facetado con <strong><code>facet_</code></strong>
</h3>
<p>El facetado permite dividir un gráfico en múltiples paneles o viñetas según los niveles de una o más variables categóricas. Esto resulta especialmente útil cuando se desea comparar patrones entre grupos sin sobrecargar un único gráfico con demasiada información.</p>
<p><code>ggplot2</code> ofrece dos funciones principales para realizar esta tarea:</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code>: separa los datos según <strong>una única variable categórica</strong>, generando una serie de paneles dispuestos de forma automática en filas y columnas.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code>: permite crear una <strong>matriz de paneles</strong> cruzando <strong>dos variables categóricas</strong>, una para las filas y otra para las columnas.</p></li>
</ul>
<p>Retomemos el gráfico de dispersión entre <code>talla</code> y <code>peso</code>, y generemos paneles separados para cada nivel de la variable <code>sexo</code> con <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">talla</span>, y <span class="op">=</span> <span class="va">peso</span>, color <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># capa geométrica de puntos</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># separa en paneles por sexo</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">sexo</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>Usaremos <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code> para crear una matriz de histogramas producto del cruce de las variables <code>fuma</code> y <code>sexo</code>. Dentro de la cuadrícula graficaremos histogramas de la variable <code>peso</code> coloreados por <code>sexo</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">peso</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># capa geométrica histograma</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/nclass.html">nclass.Sturges</a></span><span class="op">(</span><span class="va">facultad</span><span class="op">$</span><span class="va">peso</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># paleta de colores</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set1"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># separa en paneles por sexo y fuma</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">sexo</span> <span class="op">~</span> <span class="va">fuma</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>Como se puede ver en estos ejemplos, estamos integrando varias de las funciones vistas: mapeo estético, capas geométricas, escalas, y ahora también el facetado.</p>
<p>El número de combinaciones posibles es enorme, dada la variedad de funciones y argumentos que ofrece <code>ggplot2</code>. Sin embargo, el objetivo de este material es comprender los principios fundamentales sobre los que se construye esta “<em>gramática de los gráficos</em>”, propuesta por los autores del paquete.</p>
</section><section id="sistema-de-coordenadas-con-coord_" class="level3"><h3 class="anchored" data-anchor-id="sistema-de-coordenadas-con-coord_">Sistema de coordenadas con <code>coord_</code>
</h3>
<p>En algunas ocasiones, puede ser útil modificar el sistema de coordenadas predeterminado del gráfico. Por ejemplo, para invertir los ejes y presentar un gráfico de barras en disposición horizontal:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">sexo</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># capa geométrica barras</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># paleta de colores</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># invierte disposición de ejes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span>   </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="temas-con-theme" class="level3"><h3 class="anchored" data-anchor-id="temas-con-theme">Temas con <code>theme()</code>
</h3>
<p><code>ggplot2</code> incluye un conjunto de temas gráficos predefinidos que permiten modificar el aspecto general del gráfico. El tema por defecto es <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_gray()</a></code>, pero puede cambiarse agregando una capa <code>theme_*()</code> dentro del gráfico.</p>
<p>Repetimos el gráfico anterior, esta vez utilizando el tema blanco y negro (<code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw()</a></code>):</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">sexo</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># capa geométrica barras</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># paleta de colores</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># invierte disposición de ejes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># tema en blanco y negro</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>También podemos aplicar un tema de fondo oscuro con <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_dark()</a></code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">sexo</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># capa geométrica barras</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># paleta de colores</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># invierte disposición de ejes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># tema con fondo oscuro</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_dark</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>A continuación se muestra un cuadro con los principales temas disponibles en <code>ggplot2</code> y sus características visuales:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/ggplot_temas.JPG" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>Además del aspecto general del gráfico, es posible agregar títulos, subtítulos y etiquetas de ejes con la función <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code>. Por ejemplo:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="st">"Etiqueta X"</span>, </span>
<span>  y <span class="op">=</span> <span class="st">"Etiqueta Y"</span>, </span>
<span>  title <span class="op">=</span> <span class="st">"Título del gráfico"</span>, </span>
<span>  subtitle <span class="op">=</span> <span class="st">"Subtítulo del gráfico"</span></span>
<span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>También se pueden ajustar detalles del texto, como tipo de fuente o tamaño, mediante la función <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">facultad</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">sexo</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># capa geométrica barras</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># paleta de colores</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># invierte disposición de ejes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># cambia etiquetas de los ejes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Cantidad"</span>, </span>
<span>       title <span class="op">=</span> <span class="st">"Distribución de sexo"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># modifica el estilo de fuente del título</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"italic"</span>, </span>
<span>                                  size <span class="op">=</span> <span class="fl">16</span><span class="op">)</span><span class="op">)</span> </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="intro_tidyverse_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="paquete-esquisse" class="level3"><h3 class="anchored" data-anchor-id="paquete-esquisse">Paquete <code>esquisse</code>
</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/esquisse.PNG" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:20.0%"></p>
</figure>
</div>
<p>El paquete<code>esquisse</code> <span class="citation" data-cites="esquisse">(<a href="#ref-esquisse" role="doc-biblioref">Meyer y Perrier 2025</a>)</span> es una extensión de <code>ggplot2</code> que permite crear gráficos de manera interactiva, mediante una interfaz gráfica intuitiva basada en el sistema de arrastrar y soltar (<em>drag &amp; drop</em>).</p>
<p>Con <code>esquisse</code> es posible:</p>
<ul>
<li><p>Explorar visualmente los datos según su tipo.</p></li>
<li><p>Asignar variables a diferentes estéticas del gráfico (ejes, color, tamaño, etc.).</p></li>
<li><p>Exportar los resultados en distintos formatos.</p></li>
<li><p>Recuperar el código R que genera el gráfico, facilitando su reproducción y modificación.</p></li>
</ul>
<p>El paquete se instala mediante el menú <strong>Packages</strong> de RStudio o ejecutando:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"esquisse"</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Luego se puede acceder a la aplicación por medio del acceso Addins:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/addins.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>o ejecutando en consola:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">esquisser</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>También se puede agregar el nombre de la tabla de datos dentro de los paréntesis</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">esquisser</span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para más detalles, se puede consultar la <a href="https://cran.r-project.org/web/packages/esquisse/vignettes/get-started.html">viñeta</a> del paquete disponible en CRAN o en su <a href="https://github.com/dreamRs/esquisse">repositorio de GitHub</a>.</p>
</section><section id="otras-extensiones-de-ggplot2" class="level3"><h3 class="anchored" data-anchor-id="otras-extensiones-de-ggplot2">Otras extensiones de ggplot2</h3>
<p>Una de las grandes fortalezas de <code>ggplot2</code> es su ecosistema de extensiones. Hasta el momento, existen más de <a href="https://exts.ggplot2.tidyverse.org/gallery/"><strong>140 paquetes</strong></a> desarrollados para ampliar sus funcionalidades, muchos de ellos diseñados para facilitar tareas específicas o agregar nuevas capas, geometrías, temas, escalas o herramientas interactivas.</p>
<p>Algunas de las extensiones que utilizaremos durante el curso son:</p>
<ul>
<li><p><code>patchwork</code><span class="citation" data-cites="patchwork">(<a href="#ref-patchwork" role="doc-biblioref">Pedersen 2024</a>)</span>: permite combinar múltiples gráficos de <code>ggplot2</code> en una misma figura de forma sencilla y controlada.</p></li>
<li><p><code>GGally</code><span class="citation" data-cites="GGally">(<a href="#ref-GGally" role="doc-biblioref">Schloerke et&nbsp;al. 2024</a>)</span>: extiende <code>ggplot2</code> con funciones para crear matrices de gráficos (como <code>ggpairs()</code>), útiles para análisis exploratorio multivariado.</p></li>
<li><p><code>ggpubr</code><span class="citation" data-cites="ggpubr">(<a href="#ref-ggpubr" role="doc-biblioref">Kassambara 2023</a>)</span>: facilita la creación de gráficos listos para publicar, con funciones simplificadas para agregar títulos, etiquetas, comparaciones estadísticas y anotaciones.</p></li>
<li><p><code>see</code><span class="citation" data-cites="see">(<a href="#ref-see" role="doc-biblioref">Lüdecke et&nbsp;al. 2021</a>)</span>: ofrece temas, paletas de colores y escalas compatibles con personas con daltonismo, además de geometrías personalizadas.</p></li>
<li><p><code>survminer</code><span class="citation" data-cites="survminer">(<a href="#ref-survminer" role="doc-biblioref">Kassambara, Kosinski, y Biecek 2024</a>)</span>: diseñado para la visualización de análisis de supervivencia (como curvas de Kaplan-Meier) utilizando <code>ggplot2</code>.</p></li>
<li><p><code>ggfortify</code><span class="citation" data-cites="ggfortify">(<a href="#ref-ggfortify" role="doc-biblioref">Tang, Horikoshi, y Li 2016</a>)</span>: permite graficar objetos estadísticos como modelos lineales, PCA o series temporales sin necesidad de escribir código <code>ggplot2</code> desde cero.</p></li>
</ul>
<p>Estas extensiones permiten ampliar la flexibilidad y expresividad gráfica de <code>ggplot2</code> sin perder la estructura gramatical que lo caracteriza.</p>



</section></section><a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Volver arriba</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">Referencias</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-magrittr" class="csl-entry" role="listitem">
Bache, Stefan Milton, y Hadley Wickham. 2022. <span>«magrittr: A Forward-Pipe Operator for R»</span>. <a href="https://CRAN.R-project.org/package=magrittr">https://CRAN.R-project.org/package=magrittr</a>.
</div>
<div id="ref-ggpubr" class="csl-entry" role="listitem">
Kassambara, Alboukadel. 2023. <span>«ggpubr: ’ggplot2’ Based Publication Ready Plots»</span>. <a href="https://CRAN.R-project.org/package=ggpubr">https://CRAN.R-project.org/package=ggpubr</a>.
</div>
<div id="ref-survminer" class="csl-entry" role="listitem">
Kassambara, Alboukadel, Marcin Kosinski, y Przemyslaw Biecek. 2024. <span>«survminer: Drawing Survival Curves using ’ggplot2’»</span>. <a href="https://CRAN.R-project.org/package=survminer">https://CRAN.R-project.org/package=survminer</a>.
</div>
<div id="ref-see" class="csl-entry" role="listitem">
Lüdecke, Daniel, Indrajeet Patil, Mattan S. Ben-Shachar, Brenton M. Wiernik, Philip Waggoner, y Dominique Makowski. 2021. <span>«<span></span>see<span></span>: An <span></span>R<span></span> Package for Visualizing Statistical Models»</span> 6: 3393. <a href="https://doi.org/10.21105/joss.03393">https://doi.org/10.21105/joss.03393</a>.
</div>
<div id="ref-esquisse" class="csl-entry" role="listitem">
Meyer, Fanny, y Victor Perrier. 2025. <span>«esquisse: Explore and Visualize Your Data Interactively»</span>. <a href="https://CRAN.R-project.org/package=esquisse">https://CRAN.R-project.org/package=esquisse</a>.
</div>
<div id="ref-tibble" class="csl-entry" role="listitem">
Müller, Kirill, y Hadley Wickham. 2023. <span>«tibble: Simple Data Frames»</span>. <a href="https://CRAN.R-project.org/package=tibble">https://CRAN.R-project.org/package=tibble</a>.
</div>
<div id="ref-RColorBrewer" class="csl-entry" role="listitem">
Neuwirth, Erich. 2022. <span>«RColorBrewer: ColorBrewer Palettes»</span>. <a href="https://CRAN.R-project.org/package=RColorBrewer">https://CRAN.R-project.org/package=RColorBrewer</a>.
</div>
<div id="ref-patchwork" class="csl-entry" role="listitem">
Pedersen, Thomas Lin. 2024. <span>«patchwork: The Composer of Plots»</span>. <a href="https://CRAN.R-project.org/package=patchwork">https://CRAN.R-project.org/package=patchwork</a>.
</div>
<div id="ref-scico" class="csl-entry" role="listitem">
Pedersen, Thomas Lin, y Fabio Crameri. 2023. <span>«scico: Colour Palettes Based on the Scientific Colour-Maps»</span>. <a href="https://CRAN.R-project.org/package=scico">https://CRAN.R-project.org/package=scico</a>.
</div>
<div id="ref-GGally" class="csl-entry" role="listitem">
Schloerke, Barret, Di Cook, Joseph Larmarange, Francois Briatte, Moritz Marbach, Edwin Thoen, Amos Elberg, y Jason Crowley. 2024. <span>«GGally: Extension to ’ggplot2’»</span>. <a href="https://CRAN.R-project.org/package=GGally">https://CRAN.R-project.org/package=GGally</a>.
</div>
<div id="ref-ggfortify" class="csl-entry" role="listitem">
Tang, Yuan, Masaaki Horikoshi, y Wenxuan Li. 2016. <span>«ggfortify: Unified Interface to Visualize Statistical Result of Popular R Packages»</span> 8. <a href="https://doi.org/10.32614/RJ-2016-060">https://doi.org/10.32614/RJ-2016-060</a>.
</div>
<div id="ref-plyr" class="csl-entry" role="listitem">
Wickham, Hadley. 2011. <span>«The Split-Apply-Combine Strategy for Data Analysis»</span> 40. <a href="https://www.jstatsoft.org/v40/i01/">https://www.jstatsoft.org/v40/i01/</a>.
</div>
<div id="ref-ggplot2" class="csl-entry" role="listitem">
———. 2016. <span>«ggplot2: Elegant Graphics for Data Analysis»</span>. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="listitem">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et&nbsp;al. 2019. <span>«Welcome to the <span></span>tidyverse<span></span>»</span> 4: 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-readxl" class="csl-entry" role="listitem">
Wickham, Hadley, y Jennifer Bryan. 2025. <span>«readxl: Read Excel Files»</span>. <a href="https://CRAN.R-project.org/package=readxl">https://CRAN.R-project.org/package=readxl</a>.
</div>
<div id="ref-dplyr" class="csl-entry" role="listitem">
Wickham, Hadley, Romain François, Lionel Henry, Kirill Müller, y Davis Vaughan. 2023. <span>«dplyr: A Grammar of Data Manipulation»</span>. <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>.
</div>
<div id="ref-readr" class="csl-entry" role="listitem">
Wickham, Hadley, Jim Hester, y Jennifer Bryan. 2024. <span>«readr: Read Rectangular Text Data»</span>. <a href="https://CRAN.R-project.org/package=readr">https://CRAN.R-project.org/package=readr</a>.
</div>
</div></section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reutilización</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/deed.es">CC BY-NC 4.0</a></div></div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/datos-ine\.github\.io\/curso_avanzada_2025\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../unidad_1/intro_RStudio.html" class="pagination-link" aria-label="Primeros pasos y generalidades">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Primeros pasos y generalidades</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../unidad_1/analisis_exploratorio.html" class="pagination-link" aria-label="Análisis exploratorio de datos">
        <span class="nav-page-text">Análisis exploratorio de datos</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Este material es parte del curso de Epidemiología - Nivel Avanzado © 2025 Instituto Nacional de Epidemiología “Dr.&nbsp;Juan H. Jara” (ANLIS)</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>